"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ncp/approve-process/route";
exports.ids = ["app/api/ncp/approve-process/route"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fncp%2Fapprove-process%2Froute&page=%2Fapi%2Fncp%2Fapprove-process%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fncp%2Fapprove-process%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fncp%2Fapprove-process%2Froute&page=%2Fapi%2Fncp%2Fapprove-process%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fncp%2Fapprove-process%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_runner_workspace_app_api_ncp_approve_process_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/ncp/approve-process/route.ts */ \"(rsc)/./app/api/ncp/approve-process/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ncp/approve-process/route\",\n        pathname: \"/api/ncp/approve-process\",\n        filename: \"route\",\n        bundlePath: \"app/api/ncp/approve-process/route\"\n    },\n    resolvedPagePath: \"/home/runner/workspace/app/api/ncp/approve-process/route.ts\",\n    nextConfigOutput,\n    userland: _home_runner_workspace_app_api_ncp_approve_process_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ncp/approve-process/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZuY3AlMkZhcHByb3ZlLXByb2Nlc3MlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm5jcCUyRmFwcHJvdmUtcHJvY2VzcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm5jcCUyRmFwcHJvdmUtcHJvY2VzcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNXO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8/NTVkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2FwcC9hcGkvbmNwL2FwcHJvdmUtcHJvY2Vzcy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbmNwL2FwcHJvdmUtcHJvY2Vzcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL25jcC9hcHByb3ZlLXByb2Nlc3NcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL25jcC9hcHByb3ZlLXByb2Nlc3Mvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2FwcC9hcGkvbmNwL2FwcHJvdmUtcHJvY2Vzcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvbmNwL2FwcHJvdmUtcHJvY2Vzcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fncp%2Fapprove-process%2Froute&page=%2Fapi%2Fncp%2Fapprove-process%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fncp%2Fapprove-process%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/ncp/approve-process/route.ts":
/*!**********************************************!*\
  !*** ./app/api/ncp/approve-process/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./lib/database.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n\n\n\nasync function POST(request) {\n    try {\n        const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verifyAuth)(request);\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        if (user.role !== \"process_lead\" && user.role !== \"admin\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Insufficient permissions\"\n            }, {\n                status: 403\n            });\n        }\n        const { id, action, comment, rejectionReason } = await request.json();\n        if (!id || !action) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"ID and action are required\"\n            }, {\n                status: 400\n            });\n        }\n        let result;\n        if (action === \"approve\") {\n            if (!comment || !comment.trim()) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Approval comment is required\"\n                }, {\n                    status: 400\n                });\n            }\n            result = (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.approveNCPByProcessLead)(id, comment, user.username);\n        } else if (action === \"reject\") {\n            if (!rejectionReason || !rejectionReason.trim()) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Rejection reason is required\"\n                }, {\n                    status: 400\n                });\n            }\n            result = (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.rejectNCPByProcessLead)(id, rejectionReason, user.username);\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid action\"\n            }, {\n                status: 400\n            });\n        }\n        if (result.changes === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"NCP report not found\"\n            }, {\n                status: 404\n            });\n        }\n        const message = action === \"approve\" ? \"NCP approved successfully and forwarded to QA Manager\" : \"NCP rejected and returned to Team Leader\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message\n        });\n    } catch (error) {\n        console.error(\"Error in Process Lead approval:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to process approval\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL25jcC9hcHByb3ZlLXByb2Nlc3Mvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE0RDtBQUNvQjtBQUN6QztBQUVoQyxlQUFlSSxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0YsTUFBTUMsT0FBTyxNQUFNSCxxREFBVUEsQ0FBQ0U7UUFDOUIsSUFBSSxDQUFDQyxNQUFNO1lBQ1QsT0FBT04scURBQVlBLENBQUNPLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFlLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNwRTtRQUVBLElBQUlILEtBQUtJLElBQUksS0FBSyxrQkFBa0JKLEtBQUtJLElBQUksS0FBSyxTQUFTO1lBQ3pELE9BQU9WLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBMkIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ2hGO1FBRUEsTUFBTSxFQUFFRSxFQUFFLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxlQUFlLEVBQUUsR0FBRyxNQUFNVCxRQUFRRSxJQUFJO1FBRW5FLElBQUksQ0FBQ0ksTUFBTSxDQUFDQyxRQUFRO1lBQ2xCLE9BQU9aLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBNkIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ2xGO1FBRUEsSUFBSU07UUFDSixJQUFJSCxXQUFXLFdBQVc7WUFDeEIsSUFBSSxDQUFDQyxXQUFXLENBQUNBLFFBQVFHLElBQUksSUFBSTtnQkFDL0IsT0FBT2hCLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQStCLEdBQUc7b0JBQUVDLFFBQVE7Z0JBQUk7WUFDcEY7WUFDQU0sU0FBU2Qsc0VBQXVCQSxDQUFDVSxJQUFJRSxTQUFTUCxLQUFLVyxRQUFRO1FBQzdELE9BQU8sSUFBSUwsV0FBVyxVQUFVO1lBQzlCLElBQUksQ0FBQ0UsbUJBQW1CLENBQUNBLGdCQUFnQkUsSUFBSSxJQUFJO2dCQUMvQyxPQUFPaEIscURBQVlBLENBQUNPLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBK0IsR0FBRztvQkFBRUMsUUFBUTtnQkFBSTtZQUNwRjtZQUNBTSxTQUFTYixxRUFBc0JBLENBQUNTLElBQUlHLGlCQUFpQlIsS0FBS1csUUFBUTtRQUNwRSxPQUFPO1lBQ0wsT0FBT2pCLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBaUIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ3RFO1FBRUEsSUFBSU0sT0FBT0csT0FBTyxLQUFLLEdBQUc7WUFDeEIsT0FBT2xCLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBdUIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzVFO1FBRUEsTUFBTVUsVUFDSlAsV0FBVyxZQUNQLDBEQUNBO1FBRU4sT0FBT1oscURBQVlBLENBQUNPLElBQUksQ0FBQztZQUN2QmEsU0FBUztZQUNURDtRQUNGO0lBQ0YsRUFBRSxPQUFPWCxPQUFPO1FBQ2RhLFFBQVFiLEtBQUssQ0FBQyxtQ0FBbUNBO1FBQ2pELE9BQU9SLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUE2QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUNsRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2FwcC9hcGkvbmNwL2FwcHJvdmUtcHJvY2Vzcy9yb3V0ZS50cz9mNjk0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5pbXBvcnQgeyBhcHByb3ZlTkNQQnlQcm9jZXNzTGVhZCwgcmVqZWN0TkNQQnlQcm9jZXNzTGVhZCB9IGZyb20gXCJAL2xpYi9kYXRhYmFzZVwiXG5pbXBvcnQgeyB2ZXJpZnlBdXRoIH0gZnJvbSBcIkAvbGliL2F1dGhcIlxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlBdXRoKHJlcXVlc3QpXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuXG4gICAgaWYgKHVzZXIucm9sZSAhPT0gXCJwcm9jZXNzX2xlYWRcIiAmJiB1c2VyLnJvbGUgIT09IFwiYWRtaW5cIikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zXCIgfSwgeyBzdGF0dXM6IDQwMyB9KVxuICAgIH1cblxuICAgIGNvbnN0IHsgaWQsIGFjdGlvbiwgY29tbWVudCwgcmVqZWN0aW9uUmVhc29uIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuXG4gICAgaWYgKCFpZCB8fCAhYWN0aW9uKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJJRCBhbmQgYWN0aW9uIGFyZSByZXF1aXJlZFwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0XG4gICAgaWYgKGFjdGlvbiA9PT0gXCJhcHByb3ZlXCIpIHtcbiAgICAgIGlmICghY29tbWVudCB8fCAhY29tbWVudC50cmltKCkpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiQXBwcm92YWwgY29tbWVudCBpcyByZXF1aXJlZFwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICAgIH1cbiAgICAgIHJlc3VsdCA9IGFwcHJvdmVOQ1BCeVByb2Nlc3NMZWFkKGlkLCBjb21tZW50LCB1c2VyLnVzZXJuYW1lKVxuICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBcInJlamVjdFwiKSB7XG4gICAgICBpZiAoIXJlamVjdGlvblJlYXNvbiB8fCAhcmVqZWN0aW9uUmVhc29uLnRyaW0oKSkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJSZWplY3Rpb24gcmVhc29uIGlzIHJlcXVpcmVkXCIgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgICAgfVxuICAgICAgcmVzdWx0ID0gcmVqZWN0TkNQQnlQcm9jZXNzTGVhZChpZCwgcmVqZWN0aW9uUmVhc29uLCB1c2VyLnVzZXJuYW1lKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGFjdGlvblwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0LmNoYW5nZXMgPT09IDApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk5DUCByZXBvcnQgbm90IGZvdW5kXCIgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgYWN0aW9uID09PSBcImFwcHJvdmVcIlxuICAgICAgICA/IFwiTkNQIGFwcHJvdmVkIHN1Y2Nlc3NmdWxseSBhbmQgZm9yd2FyZGVkIHRvIFFBIE1hbmFnZXJcIlxuICAgICAgICA6IFwiTkNQIHJlamVjdGVkIGFuZCByZXR1cm5lZCB0byBUZWFtIExlYWRlclwiXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2UsXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gUHJvY2VzcyBMZWFkIGFwcHJvdmFsOlwiLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJGYWlsZWQgdG8gcHJvY2VzcyBhcHByb3ZhbFwiIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImFwcHJvdmVOQ1BCeVByb2Nlc3NMZWFkIiwicmVqZWN0TkNQQnlQcm9jZXNzTGVhZCIsInZlcmlmeUF1dGgiLCJQT1NUIiwicmVxdWVzdCIsInVzZXIiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJyb2xlIiwiaWQiLCJhY3Rpb24iLCJjb21tZW50IiwicmVqZWN0aW9uUmVhc29uIiwicmVzdWx0IiwidHJpbSIsInVzZXJuYW1lIiwiY2hhbmdlcyIsIm1lc3NhZ2UiLCJzdWNjZXNzIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ncp/approve-process/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verifyAuth: () => (/* binding */ verifyAuth)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n\nconst secret = new TextEncoder().encode(process.env.JWT_SECRET || \"your-secret-key\");\nasync function verifyAuth(request) {\n    try {\n        const token = request.cookies.get(\"auth-token\")?.value;\n        if (!token) {\n            return null;\n        }\n        const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_0__.jwtVerify)(token, secret);\n        return {\n            id: payload.userId,\n            username: payload.username,\n            role: payload.role\n        };\n    } catch (error) {\n        console.error(\"Auth verification error:\", error);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUNnQztBQUVoQyxNQUFNQyxTQUFTLElBQUlDLGNBQWNDLE1BQU0sQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxVQUFVLElBQUk7QUFFM0QsZUFBZUMsV0FBV0MsT0FBb0I7SUFDbkQsSUFBSTtRQUNGLE1BQU1DLFFBQVFELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGVBQWVDO1FBRWpELElBQUksQ0FBQ0gsT0FBTztZQUNWLE9BQU87UUFDVDtRQUVBLE1BQU0sRUFBRUksT0FBTyxFQUFFLEdBQUcsTUFBTWIsK0NBQVNBLENBQUNTLE9BQU9SO1FBRTNDLE9BQU87WUFDTGEsSUFBSUQsUUFBUUUsTUFBTTtZQUNsQkMsVUFBVUgsUUFBUUcsUUFBUTtZQUMxQkMsTUFBTUosUUFBUUksSUFBSTtRQUNwQjtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dFJlcXVlc3QgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIlxuaW1wb3J0IHsgand0VmVyaWZ5IH0gZnJvbSBcImpvc2VcIlxuXG5jb25zdCBzZWNyZXQgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUocHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCBcInlvdXItc2VjcmV0LWtleVwiKVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QXV0aChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRva2VuID0gcmVxdWVzdC5jb29raWVzLmdldChcImF1dGgtdG9rZW5cIik/LnZhbHVlXG5cbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IHsgcGF5bG9hZCB9ID0gYXdhaXQgand0VmVyaWZ5KHRva2VuLCBzZWNyZXQpXG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHBheWxvYWQudXNlcklkIGFzIG51bWJlcixcbiAgICAgIHVzZXJuYW1lOiBwYXlsb2FkLnVzZXJuYW1lIGFzIHN0cmluZyxcbiAgICAgIHJvbGU6IHBheWxvYWQucm9sZSBhcyBzdHJpbmcsXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJBdXRoIHZlcmlmaWNhdGlvbiBlcnJvcjpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuIl0sIm5hbWVzIjpbImp3dFZlcmlmeSIsInNlY3JldCIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJ2ZXJpZnlBdXRoIiwicmVxdWVzdCIsInRva2VuIiwiY29va2llcyIsImdldCIsInZhbHVlIiwicGF5bG9hZCIsImlkIiwidXNlcklkIiwidXNlcm5hbWUiLCJyb2xlIiwiZXJyb3IiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   approveNCPByProcessLead: () => (/* binding */ approveNCPByProcessLead),\n/* harmony export */   approveNCPByQALeader: () => (/* binding */ approveNCPByQALeader),\n/* harmony export */   approveNCPByQAManager: () => (/* binding */ approveNCPByQAManager),\n/* harmony export */   authenticateUser: () => (/* binding */ authenticateUser),\n/* harmony export */   createNCPReport: () => (/* binding */ createNCPReport),\n/* harmony export */   createNotification: () => (/* binding */ createNotification),\n/* harmony export */   createNotificationForRole: () => (/* binding */ createNotificationForRole),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   generateNCPNumber: () => (/* binding */ generateNCPNumber),\n/* harmony export */   getAllNCPReports: () => (/* binding */ getAllNCPReports),\n/* harmony export */   getNCPById: () => (/* binding */ getNCPById),\n/* harmony export */   getNCPReportsForUser: () => (/* binding */ getNCPReportsForUser),\n/* harmony export */   getNCPStatistics: () => (/* binding */ getNCPStatistics),\n/* harmony export */   getNCPStatisticsForRole: () => (/* binding */ getNCPStatisticsForRole),\n/* harmony export */   getNotificationsForUser: () => (/* binding */ getNotificationsForUser),\n/* harmony export */   getPendingNCPsForRole: () => (/* binding */ getPendingNCPsForRole),\n/* harmony export */   getUnreadNotificationCount: () => (/* binding */ getUnreadNotificationCount),\n/* harmony export */   getUserByUsername: () => (/* binding */ getUserByUsername),\n/* harmony export */   initializeDatabase: () => (/* binding */ initializeDatabase),\n/* harmony export */   markAllNotificationsAsRead: () => (/* binding */ markAllNotificationsAsRead),\n/* harmony export */   markNotificationAsRead: () => (/* binding */ markNotificationAsRead),\n/* harmony export */   processNCPByTeamLeader: () => (/* binding */ processNCPByTeamLeader),\n/* harmony export */   rejectNCPByProcessLead: () => (/* binding */ rejectNCPByProcessLead),\n/* harmony export */   rejectNCPByQALeader: () => (/* binding */ rejectNCPByQALeader),\n/* harmony export */   rejectNCPByQAManager: () => (/* binding */ rejectNCPByQAManager),\n/* harmony export */   updateExistingRecords: () => (/* binding */ updateExistingRecords)\n/* harmony export */ });\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n\n\n// Database schema and connection\nconst db = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default())(\"qa_portal.db\");\n// Initialize database tables (called only if tables don't exist)\nfunction initializeDatabase() {\n    // Check if tables exist\n    const tablesExist = db.prepare(\"SELECT name FROM sqlite_master WHERE type='table' AND name='users'\").get();\n    if (tablesExist) {\n        return;\n    }\n    // Users table\n    db.exec(`\n    CREATE TABLE IF NOT EXISTS users (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      username TEXT UNIQUE NOT NULL,\n      password TEXT NOT NULL,\n      role TEXT DEFAULT 'user',\n      full_name TEXT,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    )\n  `);\n    // NCP Reports table with extended fields for approval workflow\n    db.exec(`\n    CREATE TABLE IF NOT EXISTS ncp_reports (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      ncp_id TEXT UNIQUE NOT NULL,\n      sku_code TEXT NOT NULL,\n      machine_code TEXT NOT NULL,\n      date TEXT NOT NULL,\n      time_incident TEXT NOT NULL,\n      hold_quantity INTEGER NOT NULL,\n      hold_quantity_uom TEXT NOT NULL,\n      problem_description TEXT NOT NULL,\n      photo_attachment TEXT,\n      qa_leader TEXT NOT NULL,\n      status TEXT DEFAULT 'pending',\n      submitted_by TEXT NOT NULL,\n      submitted_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n\n      -- QA Leader Approval Fields\n      qa_approved_by TEXT,\n      qa_approved_at DATETIME,\n      disposisi TEXT,\n      jumlah_sortir TEXT DEFAULT '0',\n      jumlah_release TEXT DEFAULT '0',\n      jumlah_reject TEXT DEFAULT '0',\n      assigned_team_leader TEXT,\n      qa_rejection_reason TEXT,\n\n      -- Team Leader Fields\n      tl_processed_by TEXT,\n      tl_processed_at DATETIME,\n      root_cause_analysis TEXT,\n      corrective_action TEXT,\n      preventive_action TEXT,\n\n      -- Process Lead Fields\n      process_approved_by TEXT,\n      process_approved_at DATETIME,\n      process_rejection_reason TEXT,\n      process_comment TEXT,\n\n      -- QA Manager Fields\n      manager_approved_by TEXT,\n      manager_approved_at DATETIME,\n      manager_rejection_reason TEXT,\n      manager_comment TEXT,\n\n      -- Final status\n      archived_at DATETIME\n    )\n  `);\n    // Notifications table\n    db.exec(`\n    CREATE TABLE IF NOT EXISTS notifications (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      user_id INTEGER NOT NULL,\n      ncp_id TEXT NOT NULL,\n      title TEXT NOT NULL,\n      message TEXT NOT NULL,\n      type TEXT DEFAULT 'info',\n      is_read BOOLEAN DEFAULT FALSE,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (user_id) REFERENCES users (id)\n    )\n  `);\n}\n// FIXED: Generate automatic NCP number with format YYMM-XXXX\nfunction generateNCPNumber() {\n    const now = new Date();\n    const year = now.getFullYear().toString().slice(-2);\n    const month = (now.getMonth() + 1).toString().padStart(2, \"0\");\n    // Get the latest serial number for current year\n    const latestRecord = db.prepare(`\n    SELECT ncp_id FROM ncp_reports \n    WHERE ncp_id LIKE ? \n    ORDER BY ncp_id DESC \n    LIMIT 1\n  `).get(`${year}${month}-%`);\n    let serialNumber = 1;\n    if (latestRecord) {\n        const existingSerial = latestRecord.ncp_id.split(\"-\")[1];\n        serialNumber = Number.parseInt(existingSerial) + 1;\n    }\n    const formattedSerial = serialNumber.toString().padStart(4, \"0\");\n    return `${year}${month}-${formattedSerial}`;\n}\n// FIXED: User authentication functions\nasync function authenticateUser(username, password) {\n    const user = db.prepare(\"SELECT * FROM users WHERE username = ?\").get(username);\n    if (!user) return null;\n    const isValid = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_1__.compare)(password, user.password);\n    if (!isValid) return null;\n    return {\n        id: user.id,\n        username: user.username,\n        role: user.role,\n        fullName: user.full_name\n    };\n}\n// Get user by username\nfunction getUserByUsername(username) {\n    return db.prepare(\"SELECT id, username, role, full_name FROM users WHERE username = ?\").get(username);\n}\n// FIXED: NCP Report functions\nfunction createNCPReport(data) {\n    const ncpId = generateNCPNumber();\n    const stmt = db.prepare(`\n    INSERT INTO ncp_reports (\n      ncp_id, sku_code, machine_code, date, time_incident,\n      hold_quantity, hold_quantity_uom, problem_description,\n      photo_attachment, qa_leader, submitted_by\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n  `);\n    const result = stmt.run(ncpId, data.skuCode, data.machineCode, data.date, data.timeIncident, data.holdQuantity, data.holdQuantityUOM, data.problemDescription, data.photoAttachment, data.qaLeader, data.submittedBy);\n    // Create notification for QA Leaders\n    createNotificationForRole(\"qa_leader\", ncpId, \"New NCP Submitted\", `NCP ${ncpId} requires your approval`);\n    return {\n        id: result.lastInsertRowid,\n        ncpId\n    };\n}\n// Get NCPs based on user role and permissions\nfunction getNCPReportsForUser(userId, userRole, username) {\n    let query = \"SELECT * FROM ncp_reports\";\n    let params = [];\n    switch(userRole){\n        case \"user\":\n            query += \" WHERE submitted_by = ? ORDER BY submitted_at DESC\";\n            params = [\n                username\n            ];\n            break;\n        case \"qa_leader\":\n            query += \" ORDER BY submitted_at DESC\";\n            break;\n        case \"team_leader\":\n            query += \" WHERE assigned_team_leader = ? ORDER BY submitted_at DESC\";\n            params = [\n                username\n            ];\n            break;\n        case \"process_lead\":\n            query += \" WHERE status IN ('tl_processed', 'process_approved', 'process_rejected') ORDER BY submitted_at DESC\";\n            break;\n        case \"qa_manager\":\n        case \"admin\":\n            query += \" ORDER BY submitted_at DESC\";\n            break;\n        default:\n            query += \" WHERE submitted_by = ? ORDER BY submitted_at DESC\";\n            params = [\n                username\n            ];\n    }\n    const results = db.prepare(query).all(...params);\n    return results;\n}\n// Get all NCP reports (for database view and flow tracker)\nfunction getAllNCPReports() {\n    const query = `\n    SELECT * FROM ncp_reports \n    ORDER BY submitted_at DESC\n  `;\n    return db.prepare(query).all();\n}\n// Get pending NCPs for approval based on role\nfunction getPendingNCPsForRole(userRole, username) {\n    let query = \"\";\n    let params = [];\n    switch(userRole){\n        case \"qa_leader\":\n            query = \"SELECT * FROM ncp_reports WHERE status = 'pending' ORDER BY submitted_at ASC\";\n            break;\n        case \"team_leader\":\n            // FIXED: Show NCPs assigned to this team leader\n            query = `\n        SELECT * FROM ncp_reports \n        WHERE assigned_team_leader = ? \n        AND status IN ('qa_approved', 'tl_processed') \n        ORDER BY qa_approved_at ASC\n      `;\n            params = [\n                username\n            ];\n            break;\n        case \"process_lead\":\n            query = \"SELECT * FROM ncp_reports WHERE status = 'tl_processed' ORDER BY tl_processed_at ASC\";\n            break;\n        case \"qa_manager\":\n            query = \"SELECT * FROM ncp_reports WHERE status = 'process_approved' ORDER BY process_approved_at ASC\";\n            break;\n        default:\n            return [];\n    }\n    const results = db.prepare(query).all(...params);\n    return results;\n}\n// Get single NCP by ID\nfunction getNCPById(id) {\n    const result = db.prepare(\"SELECT * FROM ncp_reports WHERE id = ?\").get(id);\n    return result;\n}\n// FIXED: QA Leader approval - Proper data flow to Team Leader\nfunction approveNCPByQALeader(id, approvalData, qaLeaderUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'qa_approved',\n        qa_approved_by = ?,\n        qa_approved_at = CURRENT_TIMESTAMP,\n        disposisi = ?,\n        jumlah_sortir = ?,\n        jumlah_release = ?,\n        jumlah_reject = ?,\n        assigned_team_leader = ?\n    WHERE id = ?\n  `);\n    const result = stmt.run(qaLeaderUsername, approvalData.disposisi, approvalData.jumlahSortir || \"0\", approvalData.jumlahRelease || \"0\", approvalData.jumlahReject || \"0\", approvalData.assignedTeamLeader, id);\n    if (result.changes > 0) {\n        // Get NCP details for notification\n        const ncp = db.prepare(\"SELECT ncp_id FROM ncp_reports WHERE id = ?\").get(id);\n        // FIXED: Create notification for assigned team leader using the exact username\n        const teamLeaderUser = db.prepare(\"SELECT id FROM users WHERE username = ?\").get(approvalData.assignedTeamLeader);\n        if (teamLeaderUser) {\n            createNotification(teamLeaderUser.id, ncp.ncp_id, \"NCP Assigned to You\", `NCP ${ncp.ncp_id} has been approved by QA Leader and assigned to you for RCA analysis`);\n        }\n        // Also create notification for all team leaders as backup\n        createNotificationForRole(\"team_leader\", ncp.ncp_id, \"New NCP Assignment\", `NCP ${ncp.ncp_id} has been approved and assigned to ${approvalData.assignedTeamLeader}`);\n    }\n    return result;\n}\n// QA Leader rejection\nfunction rejectNCPByQALeader(id, rejectionReason, qaLeaderUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'qa_rejected',\n        qa_approved_by = ?,\n        qa_approved_at = CURRENT_TIMESTAMP,\n        qa_rejection_reason = ?\n    WHERE id = ?\n  `);\n    const result = stmt.run(qaLeaderUsername, rejectionReason, id);\n    return result;\n}\n// Team Leader processing\nfunction processNCPByTeamLeader(id, processData, teamLeaderUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'tl_processed',\n        tl_processed_by = ?,\n        tl_processed_at = CURRENT_TIMESTAMP,\n        root_cause_analysis = ?,\n        corrective_action = ?,\n        preventive_action = ?\n    WHERE id = ?\n  `);\n    const result = stmt.run(teamLeaderUsername, processData.rootCauseAnalysis, processData.correctiveAction, processData.preventiveAction, id);\n    if (result.changes > 0) {\n        // Get NCP details for notification\n        const ncp = db.prepare(\"SELECT ncp_id FROM ncp_reports WHERE id = ?\").get(id);\n        // Create notification for process leads\n        createNotificationForRole(\"process_lead\", ncp.ncp_id, \"NCP Ready for Process Review\", `NCP ${ncp.ncp_id} has been processed by Team Leader and requires process review`);\n    }\n    return result;\n}\n// Process Lead approval functions\nfunction approveNCPByProcessLead(id, comment, processLeadUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'process_approved',\n        process_approved_by = ?,\n        process_approved_at = CURRENT_TIMESTAMP,\n        process_comment = ?\n    WHERE id = ?\n  `);\n    const result = stmt.run(processLeadUsername, comment, id);\n    if (result.changes > 0) {\n        // Get NCP details for notification\n        const ncp = db.prepare(\"SELECT ncp_id FROM ncp_reports WHERE id = ?\").get(id);\n        // Create notification for QA Managers\n        createNotificationForRole(\"qa_manager\", ncp.ncp_id, \"NCP Ready for Final Approval\", `NCP ${ncp.ncp_id} has been approved by Process Lead and requires final QA Manager approval`);\n    }\n    return result;\n}\nfunction rejectNCPByProcessLead(id, rejectionReason, processLeadUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'qa_approved',\n        process_approved_by = ?,\n        process_approved_at = CURRENT_TIMESTAMP,\n        process_rejection_reason = ?\n    WHERE id = ?\n  `);\n    const result = stmt.run(processLeadUsername, rejectionReason, id);\n    if (result.changes > 0) {\n        // Get NCP details for notification\n        const ncp = db.prepare(\"SELECT ncp_id, assigned_team_leader FROM ncp_reports WHERE id = ?\").get(id);\n        // Create notification for assigned team leader\n        const teamLeaderUser = db.prepare(\"SELECT id FROM users WHERE username = ?\").get(ncp.assigned_team_leader);\n        if (teamLeaderUser) {\n            createNotification(teamLeaderUser.id, ncp.ncp_id, \"NCP Rejected by Process Lead\", `NCP ${ncp.ncp_id} has been rejected by Process Lead and returned for reprocessing. Reason: ${rejectionReason}`);\n        }\n    }\n    return result;\n}\n// QA Manager approval functions\nfunction approveNCPByQAManager(id, comment, qaManagerUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'manager_approved',\n        manager_approved_by = ?,\n        manager_approved_at = CURRENT_TIMESTAMP,\n        manager_comment = ?,\n        archived_at = CURRENT_TIMESTAMP\n    WHERE id = ?\n  `);\n    const result = stmt.run(qaManagerUsername, comment, id);\n    if (result.changes > 0) {\n        // Get NCP details for notification\n        const ncp = db.prepare(\"SELECT ncp_id, submitted_by FROM ncp_reports WHERE id = ?\").get(id);\n        // Create notification for original submitter\n        const submitterUser = db.prepare(\"SELECT id FROM users WHERE username = ?\").get(ncp.submitted_by);\n        if (submitterUser) {\n            createNotification(submitterUser.id, ncp.ncp_id, \"NCP Workflow Completed\", `NCP ${ncp.ncp_id} has been fully approved and archived. The workflow is now complete.`);\n        }\n        // Also notify QA Leader\n        const ncpDetails = db.prepare(\"SELECT qa_approved_by FROM ncp_reports WHERE id = ?\").get(id);\n        if (ncpDetails.qa_approved_by) {\n            const qaLeaderUser = db.prepare(\"SELECT id FROM users WHERE username = ?\").get(ncpDetails.qa_approved_by);\n            if (qaLeaderUser) {\n                createNotification(qaLeaderUser.id, ncp.ncp_id, \"NCP Workflow Completed\", `NCP ${ncp.ncp_id} has been fully approved by QA Manager and archived.`);\n            }\n        }\n    }\n    return result;\n}\nfunction rejectNCPByQAManager(id, rejectionReason, qaManagerUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'qa_approved',\n        manager_approved_by = ?,\n        manager_approved_at = CURRENT_TIMESTAMP,\n        manager_rejection_reason = ?\n    WHERE id = ?\n  `);\n    const result = stmt.run(qaManagerUsername, rejectionReason, id);\n    if (result.changes > 0) {\n        // Get NCP details for notification\n        const ncp = db.prepare(\"SELECT ncp_id, assigned_team_leader FROM ncp_reports WHERE id = ?\").get(id);\n        // Create notification for assigned team leader\n        const teamLeaderUser = db.prepare(\"SELECT id FROM users WHERE username = ?\").get(ncp.assigned_team_leader);\n        if (teamLeaderUser) {\n            createNotification(teamLeaderUser.id, ncp.ncp_id, \"NCP Rejected by QA Manager\", `NCP ${ncp.ncp_id} has been rejected by QA Manager and returned for reprocessing. Reason: ${rejectionReason}`);\n        }\n    }\n    return result;\n}\n// FIXED: Notification functions\nfunction createNotification(userId, ncpId, title, message, type = \"info\") {\n    const stmt = db.prepare(`\n    INSERT INTO notifications (user_id, ncp_id, title, message, type)\n    VALUES (?, ?, ?, ?, ?)\n  `);\n    const result = stmt.run(userId, ncpId, title, message, type);\n    return result;\n}\nfunction createNotificationForRole(role, ncpId, title, message, type = \"info\") {\n    const users = db.prepare(\"SELECT id FROM users WHERE role = ?\").all(role);\n    for (const user of users){\n        createNotification(user.id, ncpId, title, message, type);\n    }\n}\nfunction getNotificationsForUser(userId, limit = 10) {\n    return db.prepare(`\n    SELECT * FROM notifications \n    WHERE user_id = ? \n    ORDER BY created_at DESC \n    LIMIT ?\n  `).all(userId, limit);\n}\nfunction getUnreadNotificationCount(userId) {\n    const result = db.prepare(\"SELECT COUNT(*) as count FROM notifications WHERE user_id = ? AND is_read = FALSE\").get(userId);\n    return result.count;\n}\nfunction markNotificationAsRead(notificationId) {\n    return db.prepare(\"UPDATE notifications SET is_read = TRUE WHERE id = ?\").run(notificationId);\n}\nfunction markAllNotificationsAsRead(userId) {\n    return db.prepare(\"UPDATE notifications SET is_read = TRUE WHERE user_id = ?\").run(userId);\n}\n// Statistics functions\nfunction getNCPStatistics() {\n    const total = db.prepare(\"SELECT COUNT(*) as count FROM ncp_reports\").get();\n    const pending = db.prepare('SELECT COUNT(*) as count FROM ncp_reports WHERE status = \"pending\"').get();\n    const qaApproved = db.prepare('SELECT COUNT(*) as count FROM ncp_reports WHERE status = \"qa_approved\"').get();\n    const tlProcessed = db.prepare('SELECT COUNT(*) as count FROM ncp_reports WHERE status = \"tl_processed\"').get();\n    const rejected = db.prepare('SELECT COUNT(*) as count FROM ncp_reports WHERE status LIKE \"%rejected\"').get();\n    return {\n        total: total.count,\n        pending: pending.count,\n        qaApproved: qaApproved.count,\n        tlProcessed: tlProcessed.count,\n        rejected: rejected.count\n    };\n}\nfunction getNCPStatisticsForRole(userRole, username) {\n    let baseQuery = \"\";\n    let params = [];\n    switch(userRole){\n        case \"user\":\n            baseQuery = \"FROM ncp_reports WHERE submitted_by = ?\";\n            params = [\n                username\n            ];\n            break;\n        case \"qa_leader\":\n            baseQuery = \"FROM ncp_reports\";\n            break;\n        case \"team_leader\":\n            baseQuery = \"FROM ncp_reports WHERE assigned_team_leader = ?\";\n            params = [\n                username\n            ];\n            break;\n        default:\n            baseQuery = \"FROM ncp_reports\";\n    }\n    const total = db.prepare(`SELECT COUNT(*) as count ${baseQuery}`).get(...params);\n    const pending = db.prepare(`SELECT COUNT(*) as count ${baseQuery} AND status = 'pending'`).get(...params);\n    const approved = db.prepare(`SELECT COUNT(*) as count ${baseQuery} AND status LIKE '%approved'`).get(...params);\n    const processed = db.prepare(`SELECT COUNT(*) as count ${baseQuery} AND status LIKE '%processed'`).get(...params);\n    return {\n        total: total.count,\n        pending: pending.count,\n        approved: approved.count,\n        processed: processed.count\n    };\n}\n// Update existing records to have default values for new columns\nfunction updateExistingRecords() {\n    const updateQuery = `\n    UPDATE ncp_reports SET \n      jumlah_sortir = COALESCE(jumlah_sortir, '0'),\n      jumlah_release = COALESCE(jumlah_release, '0'), \n      jumlah_reject = COALESCE(jumlah_reject, '0')\n    WHERE jumlah_sortir IS NULL OR jumlah_release IS NULL OR jumlah_reject IS NULL\n  `;\n    const result = db.prepare(updateQuery).run();\n    return result;\n}\n// Initialize database on import\ninitializeDatabase();\nupdateExistingRecords();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUcsSUFBSW9EO0lBQ3pFLE1BQU1vRCxVQUFVNUcsR0FBR0csT0FBTyxDQUFDLENBQUMseUJBQXlCLEVBQUU4RyxVQUFVLHVCQUF1QixDQUFDLEVBQUU3RyxHQUFHLElBQUlvRDtJQUNsRyxNQUFNMEQsV0FBV2xILEdBQUdHLE9BQU8sQ0FBQyxDQUFDLHlCQUF5QixFQUFFOEcsVUFBVSw0QkFBNEIsQ0FBQyxFQUFFN0csR0FBRyxJQUFJb0Q7SUFDeEcsTUFBTTJELFlBQVluSCxHQUFHRyxPQUFPLENBQUMsQ0FBQyx5QkFBeUIsRUFBRThHLFVBQVUsNkJBQTZCLENBQUMsRUFBRTdHLEdBQUcsSUFBSW9EO0lBRTFHLE9BQU87UUFDTG1ELE9BQU9BLE1BQU1MLEtBQUs7UUFDbEJNLFNBQVNBLFFBQVFOLEtBQUs7UUFDdEJZLFVBQVVBLFNBQVNaLEtBQUs7UUFDeEJhLFdBQVdBLFVBQVViLEtBQUs7SUFDNUI7QUFDRjtBQUVBLGlFQUFpRTtBQUMxRCxTQUFTYztJQUNkLE1BQU1DLGNBQWMsQ0FBQzs7Ozs7O0VBTXJCLENBQUM7SUFFRCxNQUFNL0UsU0FBU3RDLEdBQUdHLE9BQU8sQ0FBQ2tILGFBQWE5RSxHQUFHO0lBQzFDLE9BQU9EO0FBQ1Q7QUFFQSxnQ0FBZ0M7QUFDaENyQztBQUNBbUg7QUFFYSIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvZGF0YWJhc2UudHM/NGQ0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRGF0YWJhc2UgZnJvbSBcImJldHRlci1zcWxpdGUzXCJcbmltcG9ydCB7IGNvbXBhcmUgfSBmcm9tIFwiYmNyeXB0anNcIlxuXG4vLyBEYXRhYmFzZSBzY2hlbWEgYW5kIGNvbm5lY3Rpb25cbmNvbnN0IGRiID0gbmV3IERhdGFiYXNlKFwicWFfcG9ydGFsLmRiXCIpXG5cbi8vIEluaXRpYWxpemUgZGF0YWJhc2UgdGFibGVzIChjYWxsZWQgb25seSBpZiB0YWJsZXMgZG9uJ3QgZXhpc3QpXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZURhdGFiYXNlKCkge1xuICAvLyBDaGVjayBpZiB0YWJsZXMgZXhpc3RcbiAgY29uc3QgdGFibGVzRXhpc3QgPSBkYi5wcmVwYXJlKFwiU0VMRUNUIG5hbWUgRlJPTSBzcWxpdGVfbWFzdGVyIFdIRVJFIHR5cGU9J3RhYmxlJyBBTkQgbmFtZT0ndXNlcnMnXCIpLmdldCgpXG4gIGlmICh0YWJsZXNFeGlzdCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgLy8gVXNlcnMgdGFibGVcbiAgZGIuZXhlYyhgXG4gICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlcnMgKFxuICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgdXNlcm5hbWUgVEVYVCBVTklRVUUgTk9UIE5VTEwsXG4gICAgICBwYXNzd29yZCBURVhUIE5PVCBOVUxMLFxuICAgICAgcm9sZSBURVhUIERFRkFVTFQgJ3VzZXInLFxuICAgICAgZnVsbF9uYW1lIFRFWFQsXG4gICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVBcbiAgICApXG4gIGApXG5cbiAgLy8gTkNQIFJlcG9ydHMgdGFibGUgd2l0aCBleHRlbmRlZCBmaWVsZHMgZm9yIGFwcHJvdmFsIHdvcmtmbG93XG4gIGRiLmV4ZWMoYFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIG5jcF9yZXBvcnRzIChcbiAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgIG5jcF9pZCBURVhUIFVOSVFVRSBOT1QgTlVMTCxcbiAgICAgIHNrdV9jb2RlIFRFWFQgTk9UIE5VTEwsXG4gICAgICBtYWNoaW5lX2NvZGUgVEVYVCBOT1QgTlVMTCxcbiAgICAgIGRhdGUgVEVYVCBOT1QgTlVMTCxcbiAgICAgIHRpbWVfaW5jaWRlbnQgVEVYVCBOT1QgTlVMTCxcbiAgICAgIGhvbGRfcXVhbnRpdHkgSU5URUdFUiBOT1QgTlVMTCxcbiAgICAgIGhvbGRfcXVhbnRpdHlfdW9tIFRFWFQgTk9UIE5VTEwsXG4gICAgICBwcm9ibGVtX2Rlc2NyaXB0aW9uIFRFWFQgTk9UIE5VTEwsXG4gICAgICBwaG90b19hdHRhY2htZW50IFRFWFQsXG4gICAgICBxYV9sZWFkZXIgVEVYVCBOT1QgTlVMTCxcbiAgICAgIHN0YXR1cyBURVhUIERFRkFVTFQgJ3BlbmRpbmcnLFxuICAgICAgc3VibWl0dGVkX2J5IFRFWFQgTk9UIE5VTEwsXG4gICAgICBzdWJtaXR0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcblxuICAgICAgLS0gUUEgTGVhZGVyIEFwcHJvdmFsIEZpZWxkc1xuICAgICAgcWFfYXBwcm92ZWRfYnkgVEVYVCxcbiAgICAgIHFhX2FwcHJvdmVkX2F0IERBVEVUSU1FLFxuICAgICAgZGlzcG9zaXNpIFRFWFQsXG4gICAgICBqdW1sYWhfc29ydGlyIFRFWFQgREVGQVVMVCAnMCcsXG4gICAgICBqdW1sYWhfcmVsZWFzZSBURVhUIERFRkFVTFQgJzAnLFxuICAgICAganVtbGFoX3JlamVjdCBURVhUIERFRkFVTFQgJzAnLFxuICAgICAgYXNzaWduZWRfdGVhbV9sZWFkZXIgVEVYVCxcbiAgICAgIHFhX3JlamVjdGlvbl9yZWFzb24gVEVYVCxcblxuICAgICAgLS0gVGVhbSBMZWFkZXIgRmllbGRzXG4gICAgICB0bF9wcm9jZXNzZWRfYnkgVEVYVCxcbiAgICAgIHRsX3Byb2Nlc3NlZF9hdCBEQVRFVElNRSxcbiAgICAgIHJvb3RfY2F1c2VfYW5hbHlzaXMgVEVYVCxcbiAgICAgIGNvcnJlY3RpdmVfYWN0aW9uIFRFWFQsXG4gICAgICBwcmV2ZW50aXZlX2FjdGlvbiBURVhULFxuXG4gICAgICAtLSBQcm9jZXNzIExlYWQgRmllbGRzXG4gICAgICBwcm9jZXNzX2FwcHJvdmVkX2J5IFRFWFQsXG4gICAgICBwcm9jZXNzX2FwcHJvdmVkX2F0IERBVEVUSU1FLFxuICAgICAgcHJvY2Vzc19yZWplY3Rpb25fcmVhc29uIFRFWFQsXG4gICAgICBwcm9jZXNzX2NvbW1lbnQgVEVYVCxcblxuICAgICAgLS0gUUEgTWFuYWdlciBGaWVsZHNcbiAgICAgIG1hbmFnZXJfYXBwcm92ZWRfYnkgVEVYVCxcbiAgICAgIG1hbmFnZXJfYXBwcm92ZWRfYXQgREFURVRJTUUsXG4gICAgICBtYW5hZ2VyX3JlamVjdGlvbl9yZWFzb24gVEVYVCxcbiAgICAgIG1hbmFnZXJfY29tbWVudCBURVhULFxuXG4gICAgICAtLSBGaW5hbCBzdGF0dXNcbiAgICAgIGFyY2hpdmVkX2F0IERBVEVUSU1FXG4gICAgKVxuICBgKVxuXG4gIC8vIE5vdGlmaWNhdGlvbnMgdGFibGVcbiAgZGIuZXhlYyhgXG4gICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgbm90aWZpY2F0aW9ucyAoXG4gICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICB1c2VyX2lkIElOVEVHRVIgTk9UIE5VTEwsXG4gICAgICBuY3BfaWQgVEVYVCBOT1QgTlVMTCxcbiAgICAgIHRpdGxlIFRFWFQgTk9UIE5VTEwsXG4gICAgICBtZXNzYWdlIFRFWFQgTk9UIE5VTEwsXG4gICAgICB0eXBlIFRFWFQgREVGQVVMVCAnaW5mbycsXG4gICAgICBpc19yZWFkIEJPT0xFQU4gREVGQVVMVCBGQUxTRSxcbiAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgIEZPUkVJR04gS0VZICh1c2VyX2lkKSBSRUZFUkVOQ0VTIHVzZXJzIChpZClcbiAgICApXG4gIGApXG59XG5cbi8vIEZJWEVEOiBHZW5lcmF0ZSBhdXRvbWF0aWMgTkNQIG51bWJlciB3aXRoIGZvcm1hdCBZWU1NLVhYWFhcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZU5DUE51bWJlcigpOiBzdHJpbmcge1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gIGNvbnN0IHllYXIgPSBub3cuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpLnNsaWNlKC0yKVxuICBjb25zdCBtb250aCA9IChub3cuZ2V0TW9udGgoKSArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpXG5cbiAgLy8gR2V0IHRoZSBsYXRlc3Qgc2VyaWFsIG51bWJlciBmb3IgY3VycmVudCB5ZWFyXG4gIGNvbnN0IGxhdGVzdFJlY29yZCA9IGRiXG4gICAgLnByZXBhcmUoYFxuICAgIFNFTEVDVCBuY3BfaWQgRlJPTSBuY3BfcmVwb3J0cyBcbiAgICBXSEVSRSBuY3BfaWQgTElLRSA/IFxuICAgIE9SREVSIEJZIG5jcF9pZCBERVNDIFxuICAgIExJTUlUIDFcbiAgYClcbiAgICAuZ2V0KGAke3llYXJ9JHttb250aH0tJWApXG5cbiAgbGV0IHNlcmlhbE51bWJlciA9IDFcblxuICBpZiAobGF0ZXN0UmVjb3JkKSB7XG4gICAgY29uc3QgZXhpc3RpbmdTZXJpYWwgPSBsYXRlc3RSZWNvcmQubmNwX2lkLnNwbGl0KFwiLVwiKVsxXVxuICAgIHNlcmlhbE51bWJlciA9IE51bWJlci5wYXJzZUludChleGlzdGluZ1NlcmlhbCkgKyAxXG4gIH1cblxuICBjb25zdCBmb3JtYXR0ZWRTZXJpYWwgPSBzZXJpYWxOdW1iZXIudG9TdHJpbmcoKS5wYWRTdGFydCg0LCBcIjBcIilcbiAgcmV0dXJuIGAke3llYXJ9JHttb250aH0tJHtmb3JtYXR0ZWRTZXJpYWx9YFxufVxuXG4vLyBGSVhFRDogVXNlciBhdXRoZW50aWNhdGlvbiBmdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhdXRoZW50aWNhdGVVc2VyKHVzZXJuYW1lOiBzdHJpbmcsIHBhc3N3b3JkOiBzdHJpbmcpIHtcbiAgY29uc3QgdXNlciA9IGRiLnByZXBhcmUoXCJTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIHVzZXJuYW1lID0gP1wiKS5nZXQodXNlcm5hbWUpXG4gIGlmICghdXNlcikgcmV0dXJuIG51bGxcblxuICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZClcbiAgaWYgKCFpc1ZhbGlkKSByZXR1cm4gbnVsbFxuXG4gIHJldHVybiB7XG4gICAgaWQ6IHVzZXIuaWQsXG4gICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXG4gICAgcm9sZTogdXNlci5yb2xlLFxuICAgIGZ1bGxOYW1lOiB1c2VyLmZ1bGxfbmFtZSxcbiAgfVxufVxuXG4vLyBHZXQgdXNlciBieSB1c2VybmFtZVxuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJCeVVzZXJuYW1lKHVzZXJuYW1lOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGRiLnByZXBhcmUoXCJTRUxFQ1QgaWQsIHVzZXJuYW1lLCByb2xlLCBmdWxsX25hbWUgRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ID9cIikuZ2V0KHVzZXJuYW1lKVxufVxuXG4vLyBGSVhFRDogTkNQIFJlcG9ydCBmdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOQ1BSZXBvcnQoZGF0YTogYW55KSB7XG4gIGNvbnN0IG5jcElkID0gZ2VuZXJhdGVOQ1BOdW1iZXIoKVxuXG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKGBcbiAgICBJTlNFUlQgSU5UTyBuY3BfcmVwb3J0cyAoXG4gICAgICBuY3BfaWQsIHNrdV9jb2RlLCBtYWNoaW5lX2NvZGUsIGRhdGUsIHRpbWVfaW5jaWRlbnQsXG4gICAgICBob2xkX3F1YW50aXR5LCBob2xkX3F1YW50aXR5X3VvbSwgcHJvYmxlbV9kZXNjcmlwdGlvbixcbiAgICAgIHBob3RvX2F0dGFjaG1lbnQsIHFhX2xlYWRlciwgc3VibWl0dGVkX2J5XG4gICAgKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8pXG4gIGApXG5cbiAgY29uc3QgcmVzdWx0ID0gc3RtdC5ydW4oXG4gICAgbmNwSWQsXG4gICAgZGF0YS5za3VDb2RlLFxuICAgIGRhdGEubWFjaGluZUNvZGUsXG4gICAgZGF0YS5kYXRlLFxuICAgIGRhdGEudGltZUluY2lkZW50LFxuICAgIGRhdGEuaG9sZFF1YW50aXR5LFxuICAgIGRhdGEuaG9sZFF1YW50aXR5VU9NLFxuICAgIGRhdGEucHJvYmxlbURlc2NyaXB0aW9uLFxuICAgIGRhdGEucGhvdG9BdHRhY2htZW50LFxuICAgIGRhdGEucWFMZWFkZXIsXG4gICAgZGF0YS5zdWJtaXR0ZWRCeSxcbiAgKVxuXG4gIC8vIENyZWF0ZSBub3RpZmljYXRpb24gZm9yIFFBIExlYWRlcnNcbiAgY3JlYXRlTm90aWZpY2F0aW9uRm9yUm9sZShcInFhX2xlYWRlclwiLCBuY3BJZCwgXCJOZXcgTkNQIFN1Ym1pdHRlZFwiLCBgTkNQICR7bmNwSWR9IHJlcXVpcmVzIHlvdXIgYXBwcm92YWxgKVxuXG4gIHJldHVybiB7IGlkOiByZXN1bHQubGFzdEluc2VydFJvd2lkLCBuY3BJZCB9XG59XG5cbi8vIEdldCBOQ1BzIGJhc2VkIG9uIHVzZXIgcm9sZSBhbmQgcGVybWlzc2lvbnNcbmV4cG9ydCBmdW5jdGlvbiBnZXROQ1BSZXBvcnRzRm9yVXNlcih1c2VySWQ6IG51bWJlciwgdXNlclJvbGU6IHN0cmluZywgdXNlcm5hbWU6IHN0cmluZykge1xuICBsZXQgcXVlcnkgPSBcIlNFTEVDVCAqIEZST00gbmNwX3JlcG9ydHNcIlxuICBsZXQgcGFyYW1zOiBhbnlbXSA9IFtdXG5cbiAgc3dpdGNoICh1c2VyUm9sZSkge1xuICAgIGNhc2UgXCJ1c2VyXCI6XG4gICAgICBxdWVyeSArPSBcIiBXSEVSRSBzdWJtaXR0ZWRfYnkgPSA/IE9SREVSIEJZIHN1Ym1pdHRlZF9hdCBERVNDXCJcbiAgICAgIHBhcmFtcyA9IFt1c2VybmFtZV1cbiAgICAgIGJyZWFrXG4gICAgY2FzZSBcInFhX2xlYWRlclwiOlxuICAgICAgcXVlcnkgKz0gXCIgT1JERVIgQlkgc3VibWl0dGVkX2F0IERFU0NcIlxuICAgICAgYnJlYWtcbiAgICBjYXNlIFwidGVhbV9sZWFkZXJcIjpcbiAgICAgIHF1ZXJ5ICs9IFwiIFdIRVJFIGFzc2lnbmVkX3RlYW1fbGVhZGVyID0gPyBPUkRFUiBCWSBzdWJtaXR0ZWRfYXQgREVTQ1wiXG4gICAgICBwYXJhbXMgPSBbdXNlcm5hbWVdXG4gICAgICBicmVha1xuICAgIGNhc2UgXCJwcm9jZXNzX2xlYWRcIjpcbiAgICAgIHF1ZXJ5ICs9IFwiIFdIRVJFIHN0YXR1cyBJTiAoJ3RsX3Byb2Nlc3NlZCcsICdwcm9jZXNzX2FwcHJvdmVkJywgJ3Byb2Nlc3NfcmVqZWN0ZWQnKSBPUkRFUiBCWSBzdWJtaXR0ZWRfYXQgREVTQ1wiXG4gICAgICBicmVha1xuICAgIGNhc2UgXCJxYV9tYW5hZ2VyXCI6XG4gICAgY2FzZSBcImFkbWluXCI6XG4gICAgICBxdWVyeSArPSBcIiBPUkRFUiBCWSBzdWJtaXR0ZWRfYXQgREVTQ1wiXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICBxdWVyeSArPSBcIiBXSEVSRSBzdWJtaXR0ZWRfYnkgPSA/IE9SREVSIEJZIHN1Ym1pdHRlZF9hdCBERVNDXCJcbiAgICAgIHBhcmFtcyA9IFt1c2VybmFtZV1cbiAgfVxuXG4gIGNvbnN0IHJlc3VsdHMgPSBkYi5wcmVwYXJlKHF1ZXJ5KS5hbGwoLi4ucGFyYW1zKVxuICByZXR1cm4gcmVzdWx0c1xufVxuXG4vLyBHZXQgYWxsIE5DUCByZXBvcnRzIChmb3IgZGF0YWJhc2UgdmlldyBhbmQgZmxvdyB0cmFja2VyKVxuZXhwb3J0IGZ1bmN0aW9uIGdldEFsbE5DUFJlcG9ydHMoKSB7XG4gIGNvbnN0IHF1ZXJ5ID0gYFxuICAgIFNFTEVDVCAqIEZST00gbmNwX3JlcG9ydHMgXG4gICAgT1JERVIgQlkgc3VibWl0dGVkX2F0IERFU0NcbiAgYFxuICByZXR1cm4gZGIucHJlcGFyZShxdWVyeSkuYWxsKClcbn1cblxuLy8gR2V0IHBlbmRpbmcgTkNQcyBmb3IgYXBwcm92YWwgYmFzZWQgb24gcm9sZVxuZXhwb3J0IGZ1bmN0aW9uIGdldFBlbmRpbmdOQ1BzRm9yUm9sZSh1c2VyUm9sZTogc3RyaW5nLCB1c2VybmFtZTogc3RyaW5nKSB7XG4gIGxldCBxdWVyeSA9IFwiXCJcbiAgbGV0IHBhcmFtczogYW55W10gPSBbXVxuXG4gIHN3aXRjaCAodXNlclJvbGUpIHtcbiAgICBjYXNlIFwicWFfbGVhZGVyXCI6XG4gICAgICBxdWVyeSA9IFwiU0VMRUNUICogRlJPTSBuY3BfcmVwb3J0cyBXSEVSRSBzdGF0dXMgPSAncGVuZGluZycgT1JERVIgQlkgc3VibWl0dGVkX2F0IEFTQ1wiXG4gICAgICBicmVha1xuICAgIGNhc2UgXCJ0ZWFtX2xlYWRlclwiOlxuICAgICAgLy8gRklYRUQ6IFNob3cgTkNQcyBhc3NpZ25lZCB0byB0aGlzIHRlYW0gbGVhZGVyXG4gICAgICBxdWVyeSA9IGBcbiAgICAgICAgU0VMRUNUICogRlJPTSBuY3BfcmVwb3J0cyBcbiAgICAgICAgV0hFUkUgYXNzaWduZWRfdGVhbV9sZWFkZXIgPSA/IFxuICAgICAgICBBTkQgc3RhdHVzIElOICgncWFfYXBwcm92ZWQnLCAndGxfcHJvY2Vzc2VkJykgXG4gICAgICAgIE9SREVSIEJZIHFhX2FwcHJvdmVkX2F0IEFTQ1xuICAgICAgYFxuICAgICAgcGFyYW1zID0gW3VzZXJuYW1lXVxuICAgICAgYnJlYWtcbiAgICBjYXNlIFwicHJvY2Vzc19sZWFkXCI6XG4gICAgICBxdWVyeSA9IFwiU0VMRUNUICogRlJPTSBuY3BfcmVwb3J0cyBXSEVSRSBzdGF0dXMgPSAndGxfcHJvY2Vzc2VkJyBPUkRFUiBCWSB0bF9wcm9jZXNzZWRfYXQgQVNDXCJcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBcInFhX21hbmFnZXJcIjpcbiAgICAgIHF1ZXJ5ID0gXCJTRUxFQ1QgKiBGUk9NIG5jcF9yZXBvcnRzIFdIRVJFIHN0YXR1cyA9ICdwcm9jZXNzX2FwcHJvdmVkJyBPUkRFUiBCWSBwcm9jZXNzX2FwcHJvdmVkX2F0IEFTQ1wiXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gW11cbiAgfVxuXG4gIGNvbnN0IHJlc3VsdHMgPSBkYi5wcmVwYXJlKHF1ZXJ5KS5hbGwoLi4ucGFyYW1zKVxuICByZXR1cm4gcmVzdWx0c1xufVxuXG4vLyBHZXQgc2luZ2xlIE5DUCBieSBJRFxuZXhwb3J0IGZ1bmN0aW9uIGdldE5DUEJ5SWQoaWQ6IG51bWJlcikge1xuICBjb25zdCByZXN1bHQgPSBkYi5wcmVwYXJlKFwiU0VMRUNUICogRlJPTSBuY3BfcmVwb3J0cyBXSEVSRSBpZCA9ID9cIikuZ2V0KGlkKVxuICByZXR1cm4gcmVzdWx0XG59XG5cbi8vIEZJWEVEOiBRQSBMZWFkZXIgYXBwcm92YWwgLSBQcm9wZXIgZGF0YSBmbG93IHRvIFRlYW0gTGVhZGVyXG5leHBvcnQgZnVuY3Rpb24gYXBwcm92ZU5DUEJ5UUFMZWFkZXIoaWQ6IG51bWJlciwgYXBwcm92YWxEYXRhOiBhbnksIHFhTGVhZGVyVXNlcm5hbWU6IHN0cmluZykge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShgXG4gICAgVVBEQVRFIG5jcF9yZXBvcnRzIFxuICAgIFNFVCBzdGF0dXMgPSAncWFfYXBwcm92ZWQnLFxuICAgICAgICBxYV9hcHByb3ZlZF9ieSA9ID8sXG4gICAgICAgIHFhX2FwcHJvdmVkX2F0ID0gQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIGRpc3Bvc2lzaSA9ID8sXG4gICAgICAgIGp1bWxhaF9zb3J0aXIgPSA/LFxuICAgICAgICBqdW1sYWhfcmVsZWFzZSA9ID8sXG4gICAgICAgIGp1bWxhaF9yZWplY3QgPSA/LFxuICAgICAgICBhc3NpZ25lZF90ZWFtX2xlYWRlciA9ID9cbiAgICBXSEVSRSBpZCA9ID9cbiAgYClcblxuICBjb25zdCByZXN1bHQgPSBzdG10LnJ1bihcbiAgICBxYUxlYWRlclVzZXJuYW1lLFxuICAgIGFwcHJvdmFsRGF0YS5kaXNwb3Npc2ksXG4gICAgYXBwcm92YWxEYXRhLmp1bWxhaFNvcnRpciB8fCBcIjBcIixcbiAgICBhcHByb3ZhbERhdGEuanVtbGFoUmVsZWFzZSB8fCBcIjBcIixcbiAgICBhcHByb3ZhbERhdGEuanVtbGFoUmVqZWN0IHx8IFwiMFwiLFxuICAgIGFwcHJvdmFsRGF0YS5hc3NpZ25lZFRlYW1MZWFkZXIsXG4gICAgaWQsXG4gIClcblxuICBpZiAocmVzdWx0LmNoYW5nZXMgPiAwKSB7XG4gICAgLy8gR2V0IE5DUCBkZXRhaWxzIGZvciBub3RpZmljYXRpb25cbiAgICBjb25zdCBuY3AgPSBkYi5wcmVwYXJlKFwiU0VMRUNUIG5jcF9pZCBGUk9NIG5jcF9yZXBvcnRzIFdIRVJFIGlkID0gP1wiKS5nZXQoaWQpXG5cbiAgICAvLyBGSVhFRDogQ3JlYXRlIG5vdGlmaWNhdGlvbiBmb3IgYXNzaWduZWQgdGVhbSBsZWFkZXIgdXNpbmcgdGhlIGV4YWN0IHVzZXJuYW1lXG4gICAgY29uc3QgdGVhbUxlYWRlclVzZXIgPSBkYi5wcmVwYXJlKFwiU0VMRUNUIGlkIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCIpLmdldChhcHByb3ZhbERhdGEuYXNzaWduZWRUZWFtTGVhZGVyKVxuICAgIGlmICh0ZWFtTGVhZGVyVXNlcikge1xuICAgICAgY3JlYXRlTm90aWZpY2F0aW9uKFxuICAgICAgICB0ZWFtTGVhZGVyVXNlci5pZCxcbiAgICAgICAgbmNwLm5jcF9pZCxcbiAgICAgICAgXCJOQ1AgQXNzaWduZWQgdG8gWW91XCIsXG4gICAgICAgIGBOQ1AgJHtuY3AubmNwX2lkfSBoYXMgYmVlbiBhcHByb3ZlZCBieSBRQSBMZWFkZXIgYW5kIGFzc2lnbmVkIHRvIHlvdSBmb3IgUkNBIGFuYWx5c2lzYCxcbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyBBbHNvIGNyZWF0ZSBub3RpZmljYXRpb24gZm9yIGFsbCB0ZWFtIGxlYWRlcnMgYXMgYmFja3VwXG4gICAgY3JlYXRlTm90aWZpY2F0aW9uRm9yUm9sZShcbiAgICAgIFwidGVhbV9sZWFkZXJcIixcbiAgICAgIG5jcC5uY3BfaWQsXG4gICAgICBcIk5ldyBOQ1AgQXNzaWdubWVudFwiLFxuICAgICAgYE5DUCAke25jcC5uY3BfaWR9IGhhcyBiZWVuIGFwcHJvdmVkIGFuZCBhc3NpZ25lZCB0byAke2FwcHJvdmFsRGF0YS5hc3NpZ25lZFRlYW1MZWFkZXJ9YCxcbiAgICApXG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbi8vIFFBIExlYWRlciByZWplY3Rpb25cbmV4cG9ydCBmdW5jdGlvbiByZWplY3ROQ1BCeVFBTGVhZGVyKGlkOiBudW1iZXIsIHJlamVjdGlvblJlYXNvbjogc3RyaW5nLCBxYUxlYWRlclVzZXJuYW1lOiBzdHJpbmcpIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoYFxuICAgIFVQREFURSBuY3BfcmVwb3J0cyBcbiAgICBTRVQgc3RhdHVzID0gJ3FhX3JlamVjdGVkJyxcbiAgICAgICAgcWFfYXBwcm92ZWRfYnkgPSA/LFxuICAgICAgICBxYV9hcHByb3ZlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICBxYV9yZWplY3Rpb25fcmVhc29uID0gP1xuICAgIFdIRVJFIGlkID0gP1xuICBgKVxuXG4gIGNvbnN0IHJlc3VsdCA9IHN0bXQucnVuKHFhTGVhZGVyVXNlcm5hbWUsIHJlamVjdGlvblJlYXNvbiwgaWQpXG4gIHJldHVybiByZXN1bHRcbn1cblxuLy8gVGVhbSBMZWFkZXIgcHJvY2Vzc2luZ1xuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NOQ1BCeVRlYW1MZWFkZXIoaWQ6IG51bWJlciwgcHJvY2Vzc0RhdGE6IGFueSwgdGVhbUxlYWRlclVzZXJuYW1lOiBzdHJpbmcpIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoYFxuICAgIFVQREFURSBuY3BfcmVwb3J0cyBcbiAgICBTRVQgc3RhdHVzID0gJ3RsX3Byb2Nlc3NlZCcsXG4gICAgICAgIHRsX3Byb2Nlc3NlZF9ieSA9ID8sXG4gICAgICAgIHRsX3Byb2Nlc3NlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICByb290X2NhdXNlX2FuYWx5c2lzID0gPyxcbiAgICAgICAgY29ycmVjdGl2ZV9hY3Rpb24gPSA/LFxuICAgICAgICBwcmV2ZW50aXZlX2FjdGlvbiA9ID9cbiAgICBXSEVSRSBpZCA9ID9cbiAgYClcblxuICBjb25zdCByZXN1bHQgPSBzdG10LnJ1bihcbiAgICB0ZWFtTGVhZGVyVXNlcm5hbWUsXG4gICAgcHJvY2Vzc0RhdGEucm9vdENhdXNlQW5hbHlzaXMsXG4gICAgcHJvY2Vzc0RhdGEuY29ycmVjdGl2ZUFjdGlvbixcbiAgICBwcm9jZXNzRGF0YS5wcmV2ZW50aXZlQWN0aW9uLFxuICAgIGlkLFxuICApXG5cbiAgaWYgKHJlc3VsdC5jaGFuZ2VzID4gMCkge1xuICAgIC8vIEdldCBOQ1AgZGV0YWlscyBmb3Igbm90aWZpY2F0aW9uXG4gICAgY29uc3QgbmNwID0gZGIucHJlcGFyZShcIlNFTEVDVCBuY3BfaWQgRlJPTSBuY3BfcmVwb3J0cyBXSEVSRSBpZCA9ID9cIikuZ2V0KGlkKVxuXG4gICAgLy8gQ3JlYXRlIG5vdGlmaWNhdGlvbiBmb3IgcHJvY2VzcyBsZWFkc1xuICAgIGNyZWF0ZU5vdGlmaWNhdGlvbkZvclJvbGUoXG4gICAgICBcInByb2Nlc3NfbGVhZFwiLFxuICAgICAgbmNwLm5jcF9pZCxcbiAgICAgIFwiTkNQIFJlYWR5IGZvciBQcm9jZXNzIFJldmlld1wiLFxuICAgICAgYE5DUCAke25jcC5uY3BfaWR9IGhhcyBiZWVuIHByb2Nlc3NlZCBieSBUZWFtIExlYWRlciBhbmQgcmVxdWlyZXMgcHJvY2VzcyByZXZpZXdgLFxuICAgIClcbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuLy8gUHJvY2VzcyBMZWFkIGFwcHJvdmFsIGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGFwcHJvdmVOQ1BCeVByb2Nlc3NMZWFkKGlkOiBudW1iZXIsIGNvbW1lbnQ6IHN0cmluZywgcHJvY2Vzc0xlYWRVc2VybmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKGBcbiAgICBVUERBVEUgbmNwX3JlcG9ydHMgXG4gICAgU0VUIHN0YXR1cyA9ICdwcm9jZXNzX2FwcHJvdmVkJyxcbiAgICAgICAgcHJvY2Vzc19hcHByb3ZlZF9ieSA9ID8sXG4gICAgICAgIHByb2Nlc3NfYXBwcm92ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgcHJvY2Vzc19jb21tZW50ID0gP1xuICAgIFdIRVJFIGlkID0gP1xuICBgKVxuXG4gIGNvbnN0IHJlc3VsdCA9IHN0bXQucnVuKHByb2Nlc3NMZWFkVXNlcm5hbWUsIGNvbW1lbnQsIGlkKVxuXG4gIGlmIChyZXN1bHQuY2hhbmdlcyA+IDApIHtcbiAgICAvLyBHZXQgTkNQIGRldGFpbHMgZm9yIG5vdGlmaWNhdGlvblxuICAgIGNvbnN0IG5jcCA9IGRiLnByZXBhcmUoXCJTRUxFQ1QgbmNwX2lkIEZST00gbmNwX3JlcG9ydHMgV0hFUkUgaWQgPSA/XCIpLmdldChpZClcblxuICAgIC8vIENyZWF0ZSBub3RpZmljYXRpb24gZm9yIFFBIE1hbmFnZXJzXG4gICAgY3JlYXRlTm90aWZpY2F0aW9uRm9yUm9sZShcbiAgICAgIFwicWFfbWFuYWdlclwiLFxuICAgICAgbmNwLm5jcF9pZCxcbiAgICAgIFwiTkNQIFJlYWR5IGZvciBGaW5hbCBBcHByb3ZhbFwiLFxuICAgICAgYE5DUCAke25jcC5uY3BfaWR9IGhhcyBiZWVuIGFwcHJvdmVkIGJ5IFByb2Nlc3MgTGVhZCBhbmQgcmVxdWlyZXMgZmluYWwgUUEgTWFuYWdlciBhcHByb3ZhbGAsXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVqZWN0TkNQQnlQcm9jZXNzTGVhZChpZDogbnVtYmVyLCByZWplY3Rpb25SZWFzb246IHN0cmluZywgcHJvY2Vzc0xlYWRVc2VybmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKGBcbiAgICBVUERBVEUgbmNwX3JlcG9ydHMgXG4gICAgU0VUIHN0YXR1cyA9ICdxYV9hcHByb3ZlZCcsXG4gICAgICAgIHByb2Nlc3NfYXBwcm92ZWRfYnkgPSA/LFxuICAgICAgICBwcm9jZXNzX2FwcHJvdmVkX2F0ID0gQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIHByb2Nlc3NfcmVqZWN0aW9uX3JlYXNvbiA9ID9cbiAgICBXSEVSRSBpZCA9ID9cbiAgYClcblxuICBjb25zdCByZXN1bHQgPSBzdG10LnJ1bihwcm9jZXNzTGVhZFVzZXJuYW1lLCByZWplY3Rpb25SZWFzb24sIGlkKVxuXG4gIGlmIChyZXN1bHQuY2hhbmdlcyA+IDApIHtcbiAgICAvLyBHZXQgTkNQIGRldGFpbHMgZm9yIG5vdGlmaWNhdGlvblxuICAgIGNvbnN0IG5jcCA9IGRiLnByZXBhcmUoXCJTRUxFQ1QgbmNwX2lkLCBhc3NpZ25lZF90ZWFtX2xlYWRlciBGUk9NIG5jcF9yZXBvcnRzIFdIRVJFIGlkID0gP1wiKS5nZXQoaWQpXG5cbiAgICAvLyBDcmVhdGUgbm90aWZpY2F0aW9uIGZvciBhc3NpZ25lZCB0ZWFtIGxlYWRlclxuICAgIGNvbnN0IHRlYW1MZWFkZXJVc2VyID0gZGIucHJlcGFyZShcIlNFTEVDVCBpZCBGUk9NIHVzZXJzIFdIRVJFIHVzZXJuYW1lID0gP1wiKS5nZXQobmNwLmFzc2lnbmVkX3RlYW1fbGVhZGVyKVxuICAgIGlmICh0ZWFtTGVhZGVyVXNlcikge1xuICAgICAgY3JlYXRlTm90aWZpY2F0aW9uKFxuICAgICAgICB0ZWFtTGVhZGVyVXNlci5pZCxcbiAgICAgICAgbmNwLm5jcF9pZCxcbiAgICAgICAgXCJOQ1AgUmVqZWN0ZWQgYnkgUHJvY2VzcyBMZWFkXCIsXG4gICAgICAgIGBOQ1AgJHtuY3AubmNwX2lkfSBoYXMgYmVlbiByZWplY3RlZCBieSBQcm9jZXNzIExlYWQgYW5kIHJldHVybmVkIGZvciByZXByb2Nlc3NpbmcuIFJlYXNvbjogJHtyZWplY3Rpb25SZWFzb259YCxcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbi8vIFFBIE1hbmFnZXIgYXBwcm92YWwgZnVuY3Rpb25zXG5leHBvcnQgZnVuY3Rpb24gYXBwcm92ZU5DUEJ5UUFNYW5hZ2VyKGlkOiBudW1iZXIsIGNvbW1lbnQ6IHN0cmluZywgcWFNYW5hZ2VyVXNlcm5hbWU6IHN0cmluZykge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShgXG4gICAgVVBEQVRFIG5jcF9yZXBvcnRzIFxuICAgIFNFVCBzdGF0dXMgPSAnbWFuYWdlcl9hcHByb3ZlZCcsXG4gICAgICAgIG1hbmFnZXJfYXBwcm92ZWRfYnkgPSA/LFxuICAgICAgICBtYW5hZ2VyX2FwcHJvdmVkX2F0ID0gQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIG1hbmFnZXJfY29tbWVudCA9ID8sXG4gICAgICAgIGFyY2hpdmVkX2F0ID0gQ1VSUkVOVF9USU1FU1RBTVBcbiAgICBXSEVSRSBpZCA9ID9cbiAgYClcblxuICBjb25zdCByZXN1bHQgPSBzdG10LnJ1bihxYU1hbmFnZXJVc2VybmFtZSwgY29tbWVudCwgaWQpXG5cbiAgaWYgKHJlc3VsdC5jaGFuZ2VzID4gMCkge1xuICAgIC8vIEdldCBOQ1AgZGV0YWlscyBmb3Igbm90aWZpY2F0aW9uXG4gICAgY29uc3QgbmNwID0gZGIucHJlcGFyZShcIlNFTEVDVCBuY3BfaWQsIHN1Ym1pdHRlZF9ieSBGUk9NIG5jcF9yZXBvcnRzIFdIRVJFIGlkID0gP1wiKS5nZXQoaWQpXG5cbiAgICAvLyBDcmVhdGUgbm90aWZpY2F0aW9uIGZvciBvcmlnaW5hbCBzdWJtaXR0ZXJcbiAgICBjb25zdCBzdWJtaXR0ZXJVc2VyID0gZGIucHJlcGFyZShcIlNFTEVDVCBpZCBGUk9NIHVzZXJzIFdIRVJFIHVzZXJuYW1lID0gP1wiKS5nZXQobmNwLnN1Ym1pdHRlZF9ieSlcbiAgICBpZiAoc3VibWl0dGVyVXNlcikge1xuICAgICAgY3JlYXRlTm90aWZpY2F0aW9uKFxuICAgICAgICBzdWJtaXR0ZXJVc2VyLmlkLFxuICAgICAgICBuY3AubmNwX2lkLFxuICAgICAgICBcIk5DUCBXb3JrZmxvdyBDb21wbGV0ZWRcIixcbiAgICAgICAgYE5DUCAke25jcC5uY3BfaWR9IGhhcyBiZWVuIGZ1bGx5IGFwcHJvdmVkIGFuZCBhcmNoaXZlZC4gVGhlIHdvcmtmbG93IGlzIG5vdyBjb21wbGV0ZS5gLFxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIEFsc28gbm90aWZ5IFFBIExlYWRlclxuICAgIGNvbnN0IG5jcERldGFpbHMgPSBkYi5wcmVwYXJlKFwiU0VMRUNUIHFhX2FwcHJvdmVkX2J5IEZST00gbmNwX3JlcG9ydHMgV0hFUkUgaWQgPSA/XCIpLmdldChpZClcbiAgICBpZiAobmNwRGV0YWlscy5xYV9hcHByb3ZlZF9ieSkge1xuICAgICAgY29uc3QgcWFMZWFkZXJVc2VyID0gZGIucHJlcGFyZShcIlNFTEVDVCBpZCBGUk9NIHVzZXJzIFdIRVJFIHVzZXJuYW1lID0gP1wiKS5nZXQobmNwRGV0YWlscy5xYV9hcHByb3ZlZF9ieSlcbiAgICAgIGlmIChxYUxlYWRlclVzZXIpIHtcbiAgICAgICAgY3JlYXRlTm90aWZpY2F0aW9uKFxuICAgICAgICAgIHFhTGVhZGVyVXNlci5pZCxcbiAgICAgICAgICBuY3AubmNwX2lkLFxuICAgICAgICAgIFwiTkNQIFdvcmtmbG93IENvbXBsZXRlZFwiLFxuICAgICAgICAgIGBOQ1AgJHtuY3AubmNwX2lkfSBoYXMgYmVlbiBmdWxseSBhcHByb3ZlZCBieSBRQSBNYW5hZ2VyIGFuZCBhcmNoaXZlZC5gLFxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVqZWN0TkNQQnlRQU1hbmFnZXIoaWQ6IG51bWJlciwgcmVqZWN0aW9uUmVhc29uOiBzdHJpbmcsIHFhTWFuYWdlclVzZXJuYW1lOiBzdHJpbmcpIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoYFxuICAgIFVQREFURSBuY3BfcmVwb3J0cyBcbiAgICBTRVQgc3RhdHVzID0gJ3FhX2FwcHJvdmVkJyxcbiAgICAgICAgbWFuYWdlcl9hcHByb3ZlZF9ieSA9ID8sXG4gICAgICAgIG1hbmFnZXJfYXBwcm92ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgbWFuYWdlcl9yZWplY3Rpb25fcmVhc29uID0gP1xuICAgIFdIRVJFIGlkID0gP1xuICBgKVxuXG4gIGNvbnN0IHJlc3VsdCA9IHN0bXQucnVuKHFhTWFuYWdlclVzZXJuYW1lLCByZWplY3Rpb25SZWFzb24sIGlkKVxuXG4gIGlmIChyZXN1bHQuY2hhbmdlcyA+IDApIHtcbiAgICAvLyBHZXQgTkNQIGRldGFpbHMgZm9yIG5vdGlmaWNhdGlvblxuICAgIGNvbnN0IG5jcCA9IGRiLnByZXBhcmUoXCJTRUxFQ1QgbmNwX2lkLCBhc3NpZ25lZF90ZWFtX2xlYWRlciBGUk9NIG5jcF9yZXBvcnRzIFdIRVJFIGlkID0gP1wiKS5nZXQoaWQpXG5cbiAgICAvLyBDcmVhdGUgbm90aWZpY2F0aW9uIGZvciBhc3NpZ25lZCB0ZWFtIGxlYWRlclxuICAgIGNvbnN0IHRlYW1MZWFkZXJVc2VyID0gZGIucHJlcGFyZShcIlNFTEVDVCBpZCBGUk9NIHVzZXJzIFdIRVJFIHVzZXJuYW1lID0gP1wiKS5nZXQobmNwLmFzc2lnbmVkX3RlYW1fbGVhZGVyKVxuICAgIGlmICh0ZWFtTGVhZGVyVXNlcikge1xuICAgICAgY3JlYXRlTm90aWZpY2F0aW9uKFxuICAgICAgICB0ZWFtTGVhZGVyVXNlci5pZCxcbiAgICAgICAgbmNwLm5jcF9pZCxcbiAgICAgICAgXCJOQ1AgUmVqZWN0ZWQgYnkgUUEgTWFuYWdlclwiLFxuICAgICAgICBgTkNQICR7bmNwLm5jcF9pZH0gaGFzIGJlZW4gcmVqZWN0ZWQgYnkgUUEgTWFuYWdlciBhbmQgcmV0dXJuZWQgZm9yIHJlcHJvY2Vzc2luZy4gUmVhc29uOiAke3JlamVjdGlvblJlYXNvbn1gLFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuLy8gRklYRUQ6IE5vdGlmaWNhdGlvbiBmdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOb3RpZmljYXRpb24odXNlcklkOiBudW1iZXIsIG5jcElkOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgdHlwZSA9IFwiaW5mb1wiKSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKGBcbiAgICBJTlNFUlQgSU5UTyBub3RpZmljYXRpb25zICh1c2VyX2lkLCBuY3BfaWQsIHRpdGxlLCBtZXNzYWdlLCB0eXBlKVxuICAgIFZBTFVFUyAoPywgPywgPywgPywgPylcbiAgYClcblxuICBjb25zdCByZXN1bHQgPSBzdG10LnJ1bih1c2VySWQsIG5jcElkLCB0aXRsZSwgbWVzc2FnZSwgdHlwZSlcbiAgcmV0dXJuIHJlc3VsdFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTm90aWZpY2F0aW9uRm9yUm9sZShyb2xlOiBzdHJpbmcsIG5jcElkOiBzdHJpbmcsIHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgdHlwZSA9IFwiaW5mb1wiKSB7XG4gIGNvbnN0IHVzZXJzID0gZGIucHJlcGFyZShcIlNFTEVDVCBpZCBGUk9NIHVzZXJzIFdIRVJFIHJvbGUgPSA/XCIpLmFsbChyb2xlKVxuXG4gIGZvciAoY29uc3QgdXNlciBvZiB1c2Vycykge1xuICAgIGNyZWF0ZU5vdGlmaWNhdGlvbih1c2VyLmlkLCBuY3BJZCwgdGl0bGUsIG1lc3NhZ2UsIHR5cGUpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE5vdGlmaWNhdGlvbnNGb3JVc2VyKHVzZXJJZDogbnVtYmVyLCBsaW1pdCA9IDEwKSB7XG4gIHJldHVybiBkYlxuICAgIC5wcmVwYXJlKGBcbiAgICBTRUxFQ1QgKiBGUk9NIG5vdGlmaWNhdGlvbnMgXG4gICAgV0hFUkUgdXNlcl9pZCA9ID8gXG4gICAgT1JERVIgQlkgY3JlYXRlZF9hdCBERVNDIFxuICAgIExJTUlUID9cbiAgYClcbiAgICAuYWxsKHVzZXJJZCwgbGltaXQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVbnJlYWROb3RpZmljYXRpb25Db3VudCh1c2VySWQ6IG51bWJlcikge1xuICBjb25zdCByZXN1bHQgPSBkYlxuICAgIC5wcmVwYXJlKFwiU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gbm90aWZpY2F0aW9ucyBXSEVSRSB1c2VyX2lkID0gPyBBTkQgaXNfcmVhZCA9IEZBTFNFXCIpXG4gICAgLmdldCh1c2VySWQpXG4gIHJldHVybiByZXN1bHQuY291bnRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1hcmtOb3RpZmljYXRpb25Bc1JlYWQobm90aWZpY2F0aW9uSWQ6IG51bWJlcikge1xuICByZXR1cm4gZGIucHJlcGFyZShcIlVQREFURSBub3RpZmljYXRpb25zIFNFVCBpc19yZWFkID0gVFJVRSBXSEVSRSBpZCA9ID9cIikucnVuKG5vdGlmaWNhdGlvbklkKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFya0FsbE5vdGlmaWNhdGlvbnNBc1JlYWQodXNlcklkOiBudW1iZXIpIHtcbiAgcmV0dXJuIGRiLnByZXBhcmUoXCJVUERBVEUgbm90aWZpY2F0aW9ucyBTRVQgaXNfcmVhZCA9IFRSVUUgV0hFUkUgdXNlcl9pZCA9ID9cIikucnVuKHVzZXJJZClcbn1cblxuLy8gU3RhdGlzdGljcyBmdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBnZXROQ1BTdGF0aXN0aWNzKCkge1xuICBjb25zdCB0b3RhbCA9IGRiLnByZXBhcmUoXCJTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBuY3BfcmVwb3J0c1wiKS5nZXQoKVxuICBjb25zdCBwZW5kaW5nID0gZGIucHJlcGFyZSgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gbmNwX3JlcG9ydHMgV0hFUkUgc3RhdHVzID0gXCJwZW5kaW5nXCInKS5nZXQoKVxuICBjb25zdCBxYUFwcHJvdmVkID0gZGIucHJlcGFyZSgnU0VMRUNUIENPVU5UKCopIGFzIGNvdW50IEZST00gbmNwX3JlcG9ydHMgV0hFUkUgc3RhdHVzID0gXCJxYV9hcHByb3ZlZFwiJykuZ2V0KClcbiAgY29uc3QgdGxQcm9jZXNzZWQgPSBkYi5wcmVwYXJlKCdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBuY3BfcmVwb3J0cyBXSEVSRSBzdGF0dXMgPSBcInRsX3Byb2Nlc3NlZFwiJykuZ2V0KClcbiAgY29uc3QgcmVqZWN0ZWQgPSBkYi5wcmVwYXJlKCdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBuY3BfcmVwb3J0cyBXSEVSRSBzdGF0dXMgTElLRSBcIiVyZWplY3RlZFwiJykuZ2V0KClcblxuICByZXR1cm4ge1xuICAgIHRvdGFsOiB0b3RhbC5jb3VudCxcbiAgICBwZW5kaW5nOiBwZW5kaW5nLmNvdW50LFxuICAgIHFhQXBwcm92ZWQ6IHFhQXBwcm92ZWQuY291bnQsXG4gICAgdGxQcm9jZXNzZWQ6IHRsUHJvY2Vzc2VkLmNvdW50LFxuICAgIHJlamVjdGVkOiByZWplY3RlZC5jb3VudCxcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TkNQU3RhdGlzdGljc0ZvclJvbGUodXNlclJvbGU6IHN0cmluZywgdXNlcm5hbWU6IHN0cmluZykge1xuICBsZXQgYmFzZVF1ZXJ5ID0gXCJcIlxuICBsZXQgcGFyYW1zOiBhbnlbXSA9IFtdXG5cbiAgc3dpdGNoICh1c2VyUm9sZSkge1xuICAgIGNhc2UgXCJ1c2VyXCI6XG4gICAgICBiYXNlUXVlcnkgPSBcIkZST00gbmNwX3JlcG9ydHMgV0hFUkUgc3VibWl0dGVkX2J5ID0gP1wiXG4gICAgICBwYXJhbXMgPSBbdXNlcm5hbWVdXG4gICAgICBicmVha1xuICAgIGNhc2UgXCJxYV9sZWFkZXJcIjpcbiAgICAgIGJhc2VRdWVyeSA9IFwiRlJPTSBuY3BfcmVwb3J0c1wiXG4gICAgICBicmVha1xuICAgIGNhc2UgXCJ0ZWFtX2xlYWRlclwiOlxuICAgICAgYmFzZVF1ZXJ5ID0gXCJGUk9NIG5jcF9yZXBvcnRzIFdIRVJFIGFzc2lnbmVkX3RlYW1fbGVhZGVyID0gP1wiXG4gICAgICBwYXJhbXMgPSBbdXNlcm5hbWVdXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICBiYXNlUXVlcnkgPSBcIkZST00gbmNwX3JlcG9ydHNcIlxuICB9XG5cbiAgY29uc3QgdG90YWwgPSBkYi5wcmVwYXJlKGBTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgJHtiYXNlUXVlcnl9YCkuZ2V0KC4uLnBhcmFtcylcbiAgY29uc3QgcGVuZGluZyA9IGRiLnByZXBhcmUoYFNFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCAke2Jhc2VRdWVyeX0gQU5EIHN0YXR1cyA9ICdwZW5kaW5nJ2ApLmdldCguLi5wYXJhbXMpXG4gIGNvbnN0IGFwcHJvdmVkID0gZGIucHJlcGFyZShgU0VMRUNUIENPVU5UKCopIGFzIGNvdW50ICR7YmFzZVF1ZXJ5fSBBTkQgc3RhdHVzIExJS0UgJyVhcHByb3ZlZCdgKS5nZXQoLi4ucGFyYW1zKVxuICBjb25zdCBwcm9jZXNzZWQgPSBkYi5wcmVwYXJlKGBTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgJHtiYXNlUXVlcnl9IEFORCBzdGF0dXMgTElLRSAnJXByb2Nlc3NlZCdgKS5nZXQoLi4ucGFyYW1zKVxuXG4gIHJldHVybiB7XG4gICAgdG90YWw6IHRvdGFsLmNvdW50LFxuICAgIHBlbmRpbmc6IHBlbmRpbmcuY291bnQsXG4gICAgYXBwcm92ZWQ6IGFwcHJvdmVkLmNvdW50LFxuICAgIHByb2Nlc3NlZDogcHJvY2Vzc2VkLmNvdW50LFxuICB9XG59XG5cbi8vIFVwZGF0ZSBleGlzdGluZyByZWNvcmRzIHRvIGhhdmUgZGVmYXVsdCB2YWx1ZXMgZm9yIG5ldyBjb2x1bW5zXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRXhpc3RpbmdSZWNvcmRzKCkge1xuICBjb25zdCB1cGRhdGVRdWVyeSA9IGBcbiAgICBVUERBVEUgbmNwX3JlcG9ydHMgU0VUIFxuICAgICAganVtbGFoX3NvcnRpciA9IENPQUxFU0NFKGp1bWxhaF9zb3J0aXIsICcwJyksXG4gICAgICBqdW1sYWhfcmVsZWFzZSA9IENPQUxFU0NFKGp1bWxhaF9yZWxlYXNlLCAnMCcpLCBcbiAgICAgIGp1bWxhaF9yZWplY3QgPSBDT0FMRVNDRShqdW1sYWhfcmVqZWN0LCAnMCcpXG4gICAgV0hFUkUganVtbGFoX3NvcnRpciBJUyBOVUxMIE9SIGp1bWxhaF9yZWxlYXNlIElTIE5VTEwgT1IganVtbGFoX3JlamVjdCBJUyBOVUxMXG4gIGBcblxuICBjb25zdCByZXN1bHQgPSBkYi5wcmVwYXJlKHVwZGF0ZVF1ZXJ5KS5ydW4oKVxuICByZXR1cm4gcmVzdWx0XG59XG5cbi8vIEluaXRpYWxpemUgZGF0YWJhc2Ugb24gaW1wb3J0XG5pbml0aWFsaXplRGF0YWJhc2UoKVxudXBkYXRlRXhpc3RpbmdSZWNvcmRzKClcblxuZXhwb3J0IHsgZGIgfSJdLCJuYW1lcyI6WyJEYXRhYmFzZSIsImNvbXBhcmUiLCJkYiIsImluaXRpYWxpemVEYXRhYmFzZSIsInRhYmxlc0V4aXN0IiwicHJlcGFyZSIsImdldCIsImV4ZWMiLCJnZW5lcmF0ZU5DUE51bWJlciIsIm5vdyIsIkRhdGUiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJ0b1N0cmluZyIsInNsaWNlIiwibW9udGgiLCJnZXRNb250aCIsInBhZFN0YXJ0IiwibGF0ZXN0UmVjb3JkIiwic2VyaWFsTnVtYmVyIiwiZXhpc3RpbmdTZXJpYWwiLCJuY3BfaWQiLCJzcGxpdCIsIk51bWJlciIsInBhcnNlSW50IiwiZm9ybWF0dGVkU2VyaWFsIiwiYXV0aGVudGljYXRlVXNlciIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJ1c2VyIiwiaXNWYWxpZCIsImlkIiwicm9sZSIsImZ1bGxOYW1lIiwiZnVsbF9uYW1lIiwiZ2V0VXNlckJ5VXNlcm5hbWUiLCJjcmVhdGVOQ1BSZXBvcnQiLCJkYXRhIiwibmNwSWQiLCJzdG10IiwicmVzdWx0IiwicnVuIiwic2t1Q29kZSIsIm1hY2hpbmVDb2RlIiwiZGF0ZSIsInRpbWVJbmNpZGVudCIsImhvbGRRdWFudGl0eSIsImhvbGRRdWFudGl0eVVPTSIsInByb2JsZW1EZXNjcmlwdGlvbiIsInBob3RvQXR0YWNobWVudCIsInFhTGVhZGVyIiwic3VibWl0dGVkQnkiLCJjcmVhdGVOb3RpZmljYXRpb25Gb3JSb2xlIiwibGFzdEluc2VydFJvd2lkIiwiZ2V0TkNQUmVwb3J0c0ZvclVzZXIiLCJ1c2VySWQiLCJ1c2VyUm9sZSIsInF1ZXJ5IiwicGFyYW1zIiwicmVzdWx0cyIsImFsbCIsImdldEFsbE5DUFJlcG9ydHMiLCJnZXRQZW5kaW5nTkNQc0ZvclJvbGUiLCJnZXROQ1BCeUlkIiwiYXBwcm92ZU5DUEJ5UUFMZWFkZXIiLCJhcHByb3ZhbERhdGEiLCJxYUxlYWRlclVzZXJuYW1lIiwiZGlzcG9zaXNpIiwianVtbGFoU29ydGlyIiwianVtbGFoUmVsZWFzZSIsImp1bWxhaFJlamVjdCIsImFzc2lnbmVkVGVhbUxlYWRlciIsImNoYW5nZXMiLCJuY3AiLCJ0ZWFtTGVhZGVyVXNlciIsImNyZWF0ZU5vdGlmaWNhdGlvbiIsInJlamVjdE5DUEJ5UUFMZWFkZXIiLCJyZWplY3Rpb25SZWFzb24iLCJwcm9jZXNzTkNQQnlUZWFtTGVhZGVyIiwicHJvY2Vzc0RhdGEiLCJ0ZWFtTGVhZGVyVXNlcm5hbWUiLCJyb290Q2F1c2VBbmFseXNpcyIsImNvcnJlY3RpdmVBY3Rpb24iLCJwcmV2ZW50aXZlQWN0aW9uIiwiYXBwcm92ZU5DUEJ5UHJvY2Vzc0xlYWQiLCJjb21tZW50IiwicHJvY2Vzc0xlYWRVc2VybmFtZSIsInJlamVjdE5DUEJ5UHJvY2Vzc0xlYWQiLCJhc3NpZ25lZF90ZWFtX2xlYWRlciIsImFwcHJvdmVOQ1BCeVFBTWFuYWdlciIsInFhTWFuYWdlclVzZXJuYW1lIiwic3VibWl0dGVyVXNlciIsInN1Ym1pdHRlZF9ieSIsIm5jcERldGFpbHMiLCJxYV9hcHByb3ZlZF9ieSIsInFhTGVhZGVyVXNlciIsInJlamVjdE5DUEJ5UUFNYW5hZ2VyIiwidGl0bGUiLCJtZXNzYWdlIiwidHlwZSIsInVzZXJzIiwiZ2V0Tm90aWZpY2F0aW9uc0ZvclVzZXIiLCJsaW1pdCIsImdldFVucmVhZE5vdGlmaWNhdGlvbkNvdW50IiwiY291bnQiLCJtYXJrTm90aWZpY2F0aW9uQXNSZWFkIiwibm90aWZpY2F0aW9uSWQiLCJtYXJrQWxsTm90aWZpY2F0aW9uc0FzUmVhZCIsImdldE5DUFN0YXRpc3RpY3MiLCJ0b3RhbCIsInBlbmRpbmciLCJxYUFwcHJvdmVkIiwidGxQcm9jZXNzZWQiLCJyZWplY3RlZCIsImdldE5DUFN0YXRpc3RpY3NGb3JSb2xlIiwiYmFzZVF1ZXJ5IiwiYXBwcm92ZWQiLCJwcm9jZXNzZWQiLCJ1cGRhdGVFeGlzdGluZ1JlY29yZHMiLCJ1cGRhdGVRdWVyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/jose","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fncp%2Fapprove-process%2Froute&page=%2Fapi%2Fncp%2Fapprove-process%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fncp%2Fapprove-process%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();