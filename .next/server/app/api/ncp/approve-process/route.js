"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ncp/approve-process/route";
exports.ids = ["app/api/ncp/approve-process/route"];
exports.modules = {

/***/ "better-sqlite3":
/*!*********************************!*\
  !*** external "better-sqlite3" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("better-sqlite3");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fncp%2Fapprove-process%2Froute&page=%2Fapi%2Fncp%2Fapprove-process%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fncp%2Fapprove-process%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fncp%2Fapprove-process%2Froute&page=%2Fapi%2Fncp%2Fapprove-process%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fncp%2Fapprove-process%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_runner_workspace_app_api_ncp_approve_process_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/ncp/approve-process/route.ts */ \"(rsc)/./app/api/ncp/approve-process/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ncp/approve-process/route\",\n        pathname: \"/api/ncp/approve-process\",\n        filename: \"route\",\n        bundlePath: \"app/api/ncp/approve-process/route\"\n    },\n    resolvedPagePath: \"/home/runner/workspace/app/api/ncp/approve-process/route.ts\",\n    nextConfigOutput,\n    userland: _home_runner_workspace_app_api_ncp_approve_process_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ncp/approve-process/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZuY3AlMkZhcHByb3ZlLXByb2Nlc3MlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRm5jcCUyRmFwcHJvdmUtcHJvY2VzcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRm5jcCUyRmFwcHJvdmUtcHJvY2VzcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNXO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8/NTVkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2FwcC9hcGkvbmNwL2FwcHJvdmUtcHJvY2Vzcy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvbmNwL2FwcHJvdmUtcHJvY2Vzcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL25jcC9hcHByb3ZlLXByb2Nlc3NcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL25jcC9hcHByb3ZlLXByb2Nlc3Mvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2FwcC9hcGkvbmNwL2FwcHJvdmUtcHJvY2Vzcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvbmNwL2FwcHJvdmUtcHJvY2Vzcy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fncp%2Fapprove-process%2Froute&page=%2Fapi%2Fncp%2Fapprove-process%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fncp%2Fapprove-process%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/ncp/approve-process/route.ts":
/*!**********************************************!*\
  !*** ./app/api/ncp/approve-process/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./lib/database.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n\n\n\nasync function POST(request) {\n    try {\n        const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.verifyAuth)(request);\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        if (user.role !== \"process_lead\" && user.role !== \"admin\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Insufficient permissions\"\n            }, {\n                status: 403\n            });\n        }\n        const { id, action, comment, rejectionReason } = await request.json();\n        if (!id || !action) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"ID and action are required\"\n            }, {\n                status: 400\n            });\n        }\n        let result;\n        if (action === \"approve\") {\n            if (!comment || !comment.trim()) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Approval comment is required\"\n                }, {\n                    status: 400\n                });\n            }\n            result = (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.approveNCPByProcessLead)(id, comment, user.username);\n        } else if (action === \"reject\") {\n            if (!rejectionReason || !rejectionReason.trim()) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Rejection reason is required\"\n                }, {\n                    status: 400\n                });\n            }\n            result = (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.rejectNCPByProcessLead)(id, rejectionReason, user.username);\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid action\"\n            }, {\n                status: 400\n            });\n        }\n        if (result.changes === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"NCP report not found\"\n            }, {\n                status: 404\n            });\n        }\n        const message = action === \"approve\" ? \"NCP approved successfully and forwarded to QA Manager\" : \"NCP rejected and returned to Team Leader\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message\n        });\n    } catch (error) {\n        console.error(\"Error in Process Lead approval:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to process approval\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL25jcC9hcHByb3ZlLXByb2Nlc3Mvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE0RDtBQUNvQjtBQUN6QztBQUVoQyxlQUFlSSxLQUFLQyxPQUFvQjtJQUM3QyxJQUFJO1FBQ0YsTUFBTUMsT0FBTyxNQUFNSCxxREFBVUEsQ0FBQ0U7UUFDOUIsSUFBSSxDQUFDQyxNQUFNO1lBQ1QsT0FBT04scURBQVlBLENBQUNPLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUFlLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNwRTtRQUVBLElBQUlILEtBQUtJLElBQUksS0FBSyxrQkFBa0JKLEtBQUtJLElBQUksS0FBSyxTQUFTO1lBQ3pELE9BQU9WLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBMkIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ2hGO1FBRUEsTUFBTSxFQUFFRSxFQUFFLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxlQUFlLEVBQUUsR0FBRyxNQUFNVCxRQUFRRSxJQUFJO1FBRW5FLElBQUksQ0FBQ0ksTUFBTSxDQUFDQyxRQUFRO1lBQ2xCLE9BQU9aLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBNkIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ2xGO1FBRUEsSUFBSU07UUFDSixJQUFJSCxXQUFXLFdBQVc7WUFDeEIsSUFBSSxDQUFDQyxXQUFXLENBQUNBLFFBQVFHLElBQUksSUFBSTtnQkFDL0IsT0FBT2hCLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQStCLEdBQUc7b0JBQUVDLFFBQVE7Z0JBQUk7WUFDcEY7WUFDQU0sU0FBU2Qsc0VBQXVCQSxDQUFDVSxJQUFJRSxTQUFTUCxLQUFLVyxRQUFRO1FBQzdELE9BQU8sSUFBSUwsV0FBVyxVQUFVO1lBQzlCLElBQUksQ0FBQ0UsbUJBQW1CLENBQUNBLGdCQUFnQkUsSUFBSSxJQUFJO2dCQUMvQyxPQUFPaEIscURBQVlBLENBQUNPLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBK0IsR0FBRztvQkFBRUMsUUFBUTtnQkFBSTtZQUNwRjtZQUNBTSxTQUFTYixxRUFBc0JBLENBQUNTLElBQUlHLGlCQUFpQlIsS0FBS1csUUFBUTtRQUNwRSxPQUFPO1lBQ0wsT0FBT2pCLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBaUIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQ3RFO1FBRUEsSUFBSU0sT0FBT0csT0FBTyxLQUFLLEdBQUc7WUFDeEIsT0FBT2xCLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBdUIsR0FBRztnQkFBRUMsUUFBUTtZQUFJO1FBQzVFO1FBRUEsTUFBTVUsVUFDSlAsV0FBVyxZQUNQLDBEQUNBO1FBRU4sT0FBT1oscURBQVlBLENBQUNPLElBQUksQ0FBQztZQUN2QmEsU0FBUztZQUNURDtRQUNGO0lBQ0YsRUFBRSxPQUFPWCxPQUFPO1FBQ2RhLFFBQVFiLEtBQUssQ0FBQyxtQ0FBbUNBO1FBQ2pELE9BQU9SLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUE2QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUNsRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2FwcC9hcGkvbmNwL2FwcHJvdmUtcHJvY2Vzcy9yb3V0ZS50cz9mNjk0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHR5cGUgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5pbXBvcnQgeyBhcHByb3ZlTkNQQnlQcm9jZXNzTGVhZCwgcmVqZWN0TkNQQnlQcm9jZXNzTGVhZCB9IGZyb20gXCJAL2xpYi9kYXRhYmFzZVwiXG5pbXBvcnQgeyB2ZXJpZnlBdXRoIH0gZnJvbSBcIkAvbGliL2F1dGhcIlxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB2ZXJpZnlBdXRoKHJlcXVlc3QpXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LCB7IHN0YXR1czogNDAxIH0pXG4gICAgfVxuXG4gICAgaWYgKHVzZXIucm9sZSAhPT0gXCJwcm9jZXNzX2xlYWRcIiAmJiB1c2VyLnJvbGUgIT09IFwiYWRtaW5cIikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiSW5zdWZmaWNpZW50IHBlcm1pc3Npb25zXCIgfSwgeyBzdGF0dXM6IDQwMyB9KVxuICAgIH1cblxuICAgIGNvbnN0IHsgaWQsIGFjdGlvbiwgY29tbWVudCwgcmVqZWN0aW9uUmVhc29uIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuXG4gICAgaWYgKCFpZCB8fCAhYWN0aW9uKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJJRCBhbmQgYWN0aW9uIGFyZSByZXF1aXJlZFwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0XG4gICAgaWYgKGFjdGlvbiA9PT0gXCJhcHByb3ZlXCIpIHtcbiAgICAgIGlmICghY29tbWVudCB8fCAhY29tbWVudC50cmltKCkpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IFwiQXBwcm92YWwgY29tbWVudCBpcyByZXF1aXJlZFwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICAgIH1cbiAgICAgIHJlc3VsdCA9IGFwcHJvdmVOQ1BCeVByb2Nlc3NMZWFkKGlkLCBjb21tZW50LCB1c2VyLnVzZXJuYW1lKVxuICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSBcInJlamVjdFwiKSB7XG4gICAgICBpZiAoIXJlamVjdGlvblJlYXNvbiB8fCAhcmVqZWN0aW9uUmVhc29uLnRyaW0oKSkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJSZWplY3Rpb24gcmVhc29uIGlzIHJlcXVpcmVkXCIgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgICAgfVxuICAgICAgcmVzdWx0ID0gcmVqZWN0TkNQQnlQcm9jZXNzTGVhZChpZCwgcmVqZWN0aW9uUmVhc29uLCB1c2VyLnVzZXJuYW1lKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJJbnZhbGlkIGFjdGlvblwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0LmNoYW5nZXMgPT09IDApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk5DUCByZXBvcnQgbm90IGZvdW5kXCIgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgIH1cblxuICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgYWN0aW9uID09PSBcImFwcHJvdmVcIlxuICAgICAgICA/IFwiTkNQIGFwcHJvdmVkIHN1Y2Nlc3NmdWxseSBhbmQgZm9yd2FyZGVkIHRvIFFBIE1hbmFnZXJcIlxuICAgICAgICA6IFwiTkNQIHJlamVjdGVkIGFuZCByZXR1cm5lZCB0byBUZWFtIExlYWRlclwiXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2UsXG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gUHJvY2VzcyBMZWFkIGFwcHJvdmFsOlwiLCBlcnJvcilcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJGYWlsZWQgdG8gcHJvY2VzcyBhcHByb3ZhbFwiIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImFwcHJvdmVOQ1BCeVByb2Nlc3NMZWFkIiwicmVqZWN0TkNQQnlQcm9jZXNzTGVhZCIsInZlcmlmeUF1dGgiLCJQT1NUIiwicmVxdWVzdCIsInVzZXIiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJyb2xlIiwiaWQiLCJhY3Rpb24iLCJjb21tZW50IiwicmVqZWN0aW9uUmVhc29uIiwicmVzdWx0IiwidHJpbSIsInVzZXJuYW1lIiwiY2hhbmdlcyIsIm1lc3NhZ2UiLCJzdWNjZXNzIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ncp/approve-process/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verifyAuth: () => (/* binding */ verifyAuth)\n/* harmony export */ });\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n\nconst secret = new TextEncoder().encode(process.env.JWT_SECRET || \"your-secret-key\");\nasync function verifyAuth(request) {\n    try {\n        const token = request.cookies.get(\"auth-token\")?.value;\n        if (!token) {\n            return null;\n        }\n        const { payload } = await (0,jose__WEBPACK_IMPORTED_MODULE_0__.jwtVerify)(token, secret);\n        return {\n            id: payload.userId,\n            username: payload.username,\n            role: payload.role\n        };\n    } catch (error) {\n        console.error(\"Auth verification error:\", error);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUNnQztBQUVoQyxNQUFNQyxTQUFTLElBQUlDLGNBQWNDLE1BQU0sQ0FBQ0MsUUFBUUMsR0FBRyxDQUFDQyxVQUFVLElBQUk7QUFFM0QsZUFBZUMsV0FBV0MsT0FBb0I7SUFDbkQsSUFBSTtRQUNGLE1BQU1DLFFBQVFELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGVBQWVDO1FBRWpELElBQUksQ0FBQ0gsT0FBTztZQUNWLE9BQU87UUFDVDtRQUVBLE1BQU0sRUFBRUksT0FBTyxFQUFFLEdBQUcsTUFBTWIsK0NBQVNBLENBQUNTLE9BQU9SO1FBRTNDLE9BQU87WUFDTGEsSUFBSUQsUUFBUUUsTUFBTTtZQUNsQkMsVUFBVUgsUUFBUUcsUUFBUTtZQUMxQkMsTUFBTUosUUFBUUksSUFBSTtRQUNwQjtJQUNGLEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dFJlcXVlc3QgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIlxuaW1wb3J0IHsgand0VmVyaWZ5IH0gZnJvbSBcImpvc2VcIlxuXG5jb25zdCBzZWNyZXQgPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUocHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCBcInlvdXItc2VjcmV0LWtleVwiKVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QXV0aChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHRva2VuID0gcmVxdWVzdC5jb29raWVzLmdldChcImF1dGgtdG9rZW5cIik/LnZhbHVlXG5cbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IHsgcGF5bG9hZCB9ID0gYXdhaXQgand0VmVyaWZ5KHRva2VuLCBzZWNyZXQpXG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHBheWxvYWQudXNlcklkIGFzIG51bWJlcixcbiAgICAgIHVzZXJuYW1lOiBwYXlsb2FkLnVzZXJuYW1lIGFzIHN0cmluZyxcbiAgICAgIHJvbGU6IHBheWxvYWQucm9sZSBhcyBzdHJpbmcsXG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJBdXRoIHZlcmlmaWNhdGlvbiBlcnJvcjpcIiwgZXJyb3IpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuIl0sIm5hbWVzIjpbImp3dFZlcmlmeSIsInNlY3JldCIsIlRleHRFbmNvZGVyIiwiZW5jb2RlIiwicHJvY2VzcyIsImVudiIsIkpXVF9TRUNSRVQiLCJ2ZXJpZnlBdXRoIiwicmVxdWVzdCIsInRva2VuIiwiY29va2llcyIsImdldCIsInZhbHVlIiwicGF5bG9hZCIsImlkIiwidXNlcklkIiwidXNlcm5hbWUiLCJyb2xlIiwiZXJyb3IiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/database.ts":
/*!*************************!*\
  !*** ./lib/database.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   approveNCPByProcessLead: () => (/* binding */ approveNCPByProcessLead),\n/* harmony export */   approveNCPByQALeader: () => (/* binding */ approveNCPByQALeader),\n/* harmony export */   approveNCPByQAManager: () => (/* binding */ approveNCPByQAManager),\n/* harmony export */   authenticateUser: () => (/* binding */ authenticateUser),\n/* harmony export */   createNCPReport: () => (/* binding */ createNCPReport),\n/* harmony export */   createNotification: () => (/* binding */ createNotification),\n/* harmony export */   createNotificationForRole: () => (/* binding */ createNotificationForRole),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   generateNCPNumber: () => (/* binding */ generateNCPNumber),\n/* harmony export */   getAllNCPReports: () => (/* binding */ getAllNCPReports),\n/* harmony export */   getNCPById: () => (/* binding */ getNCPById),\n/* harmony export */   getNCPReportsForUser: () => (/* binding */ getNCPReportsForUser),\n/* harmony export */   getNCPStatistics: () => (/* binding */ getNCPStatistics),\n/* harmony export */   getNCPStatisticsForRole: () => (/* binding */ getNCPStatisticsForRole),\n/* harmony export */   getNotificationsForUser: () => (/* binding */ getNotificationsForUser),\n/* harmony export */   getPendingNCPsForRole: () => (/* binding */ getPendingNCPsForRole),\n/* harmony export */   getUnreadNotificationCount: () => (/* binding */ getUnreadNotificationCount),\n/* harmony export */   getUserByUsername: () => (/* binding */ getUserByUsername),\n/* harmony export */   initializeDatabase: () => (/* binding */ initializeDatabase),\n/* harmony export */   markAllNotificationsAsRead: () => (/* binding */ markAllNotificationsAsRead),\n/* harmony export */   markNotificationAsRead: () => (/* binding */ markNotificationAsRead),\n/* harmony export */   processNCPByTeamLeader: () => (/* binding */ processNCPByTeamLeader),\n/* harmony export */   rejectNCPByProcessLead: () => (/* binding */ rejectNCPByProcessLead),\n/* harmony export */   rejectNCPByQALeader: () => (/* binding */ rejectNCPByQALeader),\n/* harmony export */   rejectNCPByQAManager: () => (/* binding */ rejectNCPByQAManager),\n/* harmony export */   updateExistingRecords: () => (/* binding */ updateExistingRecords)\n/* harmony export */ });\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-sqlite3 */ \"better-sqlite3\");\n/* harmony import */ var better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(better_sqlite3__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n\n\n// Database schema and connection\nconst db = new (better_sqlite3__WEBPACK_IMPORTED_MODULE_0___default())(\"qa_portal.db\");\n// Initialize database tables (called only if tables don't exist)\nfunction initializeDatabase() {\n    // Check if tables exist\n    const tablesExist = db.prepare(\"SELECT name FROM sqlite_master WHERE type='table' AND name='users'\").get();\n    if (tablesExist) {\n        return;\n    }\n    // Users table\n    db.exec(`\n    CREATE TABLE IF NOT EXISTS users (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      username TEXT UNIQUE NOT NULL,\n      password TEXT NOT NULL,\n      role TEXT DEFAULT 'user',\n      full_name TEXT,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    )\n  `);\n    // NCP Reports table with extended fields for approval workflow\n    db.exec(`\n    CREATE TABLE IF NOT EXISTS ncp_reports (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      ncp_id TEXT UNIQUE NOT NULL,\n      sku_code TEXT NOT NULL,\n      machine_code TEXT NOT NULL,\n      date TEXT NOT NULL,\n      time_incident TEXT NOT NULL,\n      hold_quantity INTEGER NOT NULL,\n      hold_quantity_uom TEXT NOT NULL,\n      problem_description TEXT NOT NULL,\n      photo_attachment TEXT,\n      qa_leader TEXT NOT NULL,\n      status TEXT DEFAULT 'pending',\n      submitted_by TEXT NOT NULL,\n      submitted_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n\n      -- QA Leader Approval Fields\n      qa_approved_by TEXT,\n      qa_approved_at DATETIME,\n      disposisi TEXT,\n      jumlah_sortir TEXT DEFAULT '0',\n      jumlah_release TEXT DEFAULT '0',\n      jumlah_reject TEXT DEFAULT '0',\n      assigned_team_leader TEXT,\n      qa_rejection_reason TEXT,\n\n      -- Team Leader Fields\n      tl_processed_by TEXT,\n      tl_processed_at DATETIME,\n      root_cause_analysis TEXT,\n      corrective_action TEXT,\n      preventive_action TEXT,\n\n      -- Process Lead Fields\n      process_approved_by TEXT,\n      process_approved_at DATETIME,\n      process_rejection_reason TEXT,\n      process_comment TEXT,\n\n      -- QA Manager Fields\n      manager_approved_by TEXT,\n      manager_approved_at DATETIME,\n      manager_rejection_reason TEXT,\n      manager_comment TEXT,\n\n      -- Final status\n      archived_at DATETIME\n    )\n  `);\n    // Notifications table\n    db.exec(`\n    CREATE TABLE IF NOT EXISTS notifications (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      user_id INTEGER NOT NULL,\n      ncp_id TEXT NOT NULL,\n      title TEXT NOT NULL,\n      message TEXT NOT NULL,\n      type TEXT DEFAULT 'info',\n      is_read BOOLEAN DEFAULT FALSE,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n      FOREIGN KEY (user_id) REFERENCES users (id)\n    )\n  `);\n}\n// FIXED: Generate automatic NCP number with format YYMM-XXXX\nfunction generateNCPNumber() {\n    const now = new Date();\n    const year = now.getFullYear().toString().slice(-2);\n    const month = (now.getMonth() + 1).toString().padStart(2, \"0\");\n    // Get the latest serial number for current year\n    const latestRecord = db.prepare(`\n    SELECT ncp_id FROM ncp_reports \n    WHERE ncp_id LIKE ? \n    ORDER BY ncp_id DESC \n    LIMIT 1\n  `).get(`${year}${month}-%`);\n    let serialNumber = 1;\n    if (latestRecord) {\n        const existingSerial = latestRecord.ncp_id.split(\"-\")[1];\n        serialNumber = Number.parseInt(existingSerial) + 1;\n    }\n    const formattedSerial = serialNumber.toString().padStart(4, \"0\");\n    return `${year}${month}-${formattedSerial}`;\n}\n// FIXED: User authentication functions\nasync function authenticateUser(username, password) {\n    const user = db.prepare(\"SELECT * FROM users WHERE username = ?\").get(username);\n    if (!user) return null;\n    const isValid = await (0,bcryptjs__WEBPACK_IMPORTED_MODULE_1__.compare)(password, user.password);\n    if (!isValid) return null;\n    return {\n        id: user.id,\n        username: user.username,\n        role: user.role,\n        fullName: user.full_name\n    };\n}\n// Get user by username\nfunction getUserByUsername(username) {\n    return db.prepare(\"SELECT id, username, role, full_name FROM users WHERE username = ?\").get(username);\n}\n// FIXED: NCP Report functions\nfunction createNCPReport(data) {\n    const ncpId = generateNCPNumber();\n    const stmt = db.prepare(`\n    INSERT INTO ncp_reports (\n      ncp_id, sku_code, machine_code, date, time_incident,\n      hold_quantity, hold_quantity_uom, problem_description,\n      photo_attachment, qa_leader, submitted_by\n    ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n  `);\n    const result = stmt.run(ncpId, data.skuCode, data.machineCode, data.date, data.timeIncident, data.holdQuantity, data.holdQuantityUOM, data.problemDescription, data.photoAttachment, data.qaLeader, data.submittedBy);\n    // Create notification for QA Leaders\n    createNotificationForRole(\"qa_leader\", ncpId, \"New NCP Submitted\", `NCP ${ncpId} requires your approval`);\n    return {\n        id: result.lastInsertRowid,\n        ncpId\n    };\n}\n// Get all NCP reports for database view and flow tracker\nfunction getAllNCPReports() {\n    return db.prepare(\"SELECT * FROM ncp_reports ORDER BY submitted_at DESC\").all();\n}\n// Get NCPs based on user role and permissions\nfunction getNCPReportsForUser(userId, userRole, username) {\n    let query = \"SELECT * FROM ncp_reports\";\n    let params = [];\n    switch(userRole){\n        case \"user\":\n            query += \" WHERE submitted_by = ? ORDER BY submitted_at DESC\";\n            params = [\n                username\n            ];\n            break;\n        case \"qa_leader\":\n            query += \" ORDER BY submitted_at DESC\";\n            break;\n        case \"team_leader\":\n            query += \" WHERE assigned_team_leader = ? ORDER BY submitted_at DESC\";\n            params = [\n                username\n            ];\n            break;\n        case \"process_lead\":\n            query += \" WHERE status IN ('tl_processed', 'process_approved', 'process_rejected') ORDER BY submitted_at DESC\";\n            break;\n        case \"qa_manager\":\n        case \"admin\":\n            query += \" ORDER BY submitted_at DESC\";\n            break;\n        default:\n            query += \" WHERE submitted_by = ? ORDER BY submitted_at DESC\";\n            params = [\n                username\n            ];\n    }\n    const results = db.prepare(query).all(...params);\n    return results;\n}\n// Get pending NCPs for approval based on role\nfunction getPendingNCPsForRole(userRole, username) {\n    let query = \"\";\n    let params = [];\n    switch(userRole){\n        case \"qa_leader\":\n            query = \"SELECT * FROM ncp_reports WHERE status = 'pending' ORDER BY submitted_at ASC\";\n            break;\n        case \"team_leader\":\n            // FIXED: Show NCPs assigned to this team leader\n            query = `\n        SELECT * FROM ncp_reports \n        WHERE assigned_team_leader = ? \n        AND status IN ('qa_approved', 'tl_processed') \n        ORDER BY qa_approved_at ASC\n      `;\n            params = [\n                username\n            ];\n            break;\n        case \"process_lead\":\n            query = \"SELECT * FROM ncp_reports WHERE status = 'tl_processed' ORDER BY tl_processed_at ASC\";\n            break;\n        case \"qa_manager\":\n            query = \"SELECT * FROM ncp_reports WHERE status = 'process_approved' ORDER BY process_approved_at ASC\";\n            break;\n        default:\n            return [];\n    }\n    const results = db.prepare(query).all(...params);\n    return results;\n}\n// Get single NCP by ID\nfunction getNCPById(id) {\n    const result = db.prepare(\"SELECT * FROM ncp_reports WHERE id = ?\").get(id);\n    return result;\n}\n// FIXED: QA Leader approval - Proper data flow to Team Leader\nfunction approveNCPByQALeader(id, approvalData, qaLeaderUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'qa_approved',\n        qa_approved_by = ?,\n        qa_approved_at = CURRENT_TIMESTAMP,\n        disposisi = ?,\n        jumlah_sortir = ?,\n        jumlah_release = ?,\n        jumlah_reject = ?,\n        assigned_team_leader = ?\n    WHERE id = ?\n  `);\n    const result = stmt.run(qaLeaderUsername, approvalData.disposisi, approvalData.jumlahSortir || \"0\", approvalData.jumlahRelease || \"0\", approvalData.jumlahReject || \"0\", approvalData.assignedTeamLeader, id);\n    if (result.changes > 0) {\n        // Get NCP details for notification\n        const ncp = db.prepare(\"SELECT ncp_id FROM ncp_reports WHERE id = ?\").get(id);\n        // FIXED: Create notification for assigned team leader using the exact username\n        const teamLeaderUser = db.prepare(\"SELECT id FROM users WHERE username = ?\").get(approvalData.assignedTeamLeader);\n        if (teamLeaderUser) {\n            createNotification(teamLeaderUser.id, ncp.ncp_id, \"NCP Assigned to You\", `NCP ${ncp.ncp_id} has been approved by QA Leader and assigned to you for RCA analysis`);\n        }\n        // Also create notification for all team leaders as backup\n        createNotificationForRole(\"team_leader\", ncp.ncp_id, \"New NCP Assignment\", `NCP ${ncp.ncp_id} has been approved and assigned to ${approvalData.assignedTeamLeader}`);\n    }\n    return result;\n}\n// QA Leader rejection\nfunction rejectNCPByQALeader(id, rejectionReason, qaLeaderUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'qa_rejected',\n        qa_approved_by = ?,\n        qa_approved_at = CURRENT_TIMESTAMP,\n        qa_rejection_reason = ?\n    WHERE id = ?\n  `);\n    const result = stmt.run(qaLeaderUsername, rejectionReason, id);\n    return result;\n}\n// Team Leader processing\nfunction processNCPByTeamLeader(id, processData, teamLeaderUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'tl_processed',\n        tl_processed_by = ?,\n        tl_processed_at = CURRENT_TIMESTAMP,\n        root_cause_analysis = ?,\n        corrective_action = ?,\n        preventive_action = ?\n    WHERE id = ?\n  `);\n    const result = stmt.run(teamLeaderUsername, processData.rootCauseAnalysis, processData.correctiveAction, processData.preventiveAction, id);\n    if (result.changes > 0) {\n        // Get NCP details for notification\n        const ncp = db.prepare(\"SELECT ncp_id FROM ncp_reports WHERE id = ?\").get(id);\n        // Create notification for process leads\n        createNotificationForRole(\"process_lead\", ncp.ncp_id, \"NCP Ready for Process Review\", `NCP ${ncp.ncp_id} has been processed by Team Leader and requires process review`);\n    }\n    return result;\n}\n// Process Lead approval functions\nfunction approveNCPByProcessLead(id, comment, processLeadUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'process_approved',\n        process_approved_by = ?,\n        process_approved_at = CURRENT_TIMESTAMP,\n        process_comment = ?\n    WHERE id = ?\n  `);\n    const result = stmt.run(processLeadUsername, comment, id);\n    if (result.changes > 0) {\n        // Get NCP details for notification\n        const ncp = db.prepare(\"SELECT ncp_id FROM ncp_reports WHERE id = ?\").get(id);\n        // Create notification for QA Managers\n        createNotificationForRole(\"qa_manager\", ncp.ncp_id, \"NCP Ready for Final Approval\", `NCP ${ncp.ncp_id} has been approved by Process Lead and requires final QA Manager approval`);\n    }\n    return result;\n}\nfunction rejectNCPByProcessLead(id, rejectionReason, processLeadUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'qa_approved',\n        process_approved_by = ?,\n        process_approved_at = CURRENT_TIMESTAMP,\n        process_rejection_reason = ?\n    WHERE id = ?\n  `);\n    const result = stmt.run(processLeadUsername, rejectionReason, id);\n    if (result.changes > 0) {\n        // Get NCP details for notification\n        const ncp = db.prepare(\"SELECT ncp_id, assigned_team_leader FROM ncp_reports WHERE id = ?\").get(id);\n        // Create notification for assigned team leader\n        const teamLeaderUser = db.prepare(\"SELECT id FROM users WHERE username = ?\").get(ncp.assigned_team_leader);\n        if (teamLeaderUser) {\n            createNotification(teamLeaderUser.id, ncp.ncp_id, \"NCP Rejected by Process Lead\", `NCP ${ncp.ncp_id} has been rejected by Process Lead and returned for reprocessing. Reason: ${rejectionReason}`);\n        }\n    }\n    return result;\n}\n// QA Manager approval functions\nfunction approveNCPByQAManager(id, comment, qaManagerUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'manager_approved',\n        manager_approved_by = ?,\n        manager_approved_at = CURRENT_TIMESTAMP,\n        manager_comment = ?,\n        archived_at = CURRENT_TIMESTAMP\n    WHERE id = ?\n  `);\n    const result = stmt.run(qaManagerUsername, comment, id);\n    if (result.changes > 0) {\n        // Get NCP details for notification\n        const ncp = db.prepare(\"SELECT ncp_id, submitted_by FROM ncp_reports WHERE id = ?\").get(id);\n        // Create notification for original submitter\n        const submitterUser = db.prepare(\"SELECT id FROM users WHERE username = ?\").get(ncp.submitted_by);\n        if (submitterUser) {\n            createNotification(submitterUser.id, ncp.ncp_id, \"NCP Workflow Completed\", `NCP ${ncp.ncp_id} has been fully approved and archived. The workflow is now complete.`);\n        }\n        // Also notify QA Leader\n        const ncpDetails = db.prepare(\"SELECT qa_approved_by FROM ncp_reports WHERE id = ?\").get(id);\n        if (ncpDetails.qa_approved_by) {\n            const qaLeaderUser = db.prepare(\"SELECT id FROM users WHERE username = ?\").get(ncpDetails.qa_approved_by);\n            if (qaLeaderUser) {\n                createNotification(qaLeaderUser.id, ncp.ncp_id, \"NCP Workflow Completed\", `NCP ${ncp.ncp_id} has been fully approved by QA Manager and archived.`);\n            }\n        }\n    }\n    return result;\n}\nfunction rejectNCPByQAManager(id, rejectionReason, qaManagerUsername) {\n    const stmt = db.prepare(`\n    UPDATE ncp_reports \n    SET status = 'qa_approved',\n        manager_approved_by = ?,\n        manager_approved_at = CURRENT_TIMESTAMP,\n        manager_rejection_reason = ?\n    WHERE id = ?\n  `);\n    const result = stmt.run(qaManagerUsername, rejectionReason, id);\n    if (result.changes > 0) {\n        // Get NCP details for notification\n        const ncp = db.prepare(\"SELECT ncp_id, assigned_team_leader FROM ncp_reports WHERE id = ?\").get(id);\n        // Create notification for assigned team leader\n        const teamLeaderUser = db.prepare(\"SELECT id FROM users WHERE username = ?\").get(ncp.assigned_team_leader);\n        if (teamLeaderUser) {\n            createNotification(teamLeaderUser.id, ncp.ncp_id, \"NCP Rejected by QA Manager\", `NCP ${ncp.ncp_id} has been rejected by QA Manager and returned for reprocessing. Reason: ${rejectionReason}`);\n        }\n    }\n    return result;\n}\n// FIXED: Notification functions\nfunction createNotification(userId, ncpId, title, message, type = \"info\") {\n    const stmt = db.prepare(`\n    INSERT INTO notifications (user_id, ncp_id, title, message, type)\n    VALUES (?, ?, ?, ?, ?)\n  `);\n    const result = stmt.run(userId, ncpId, title, message, type);\n    return result;\n}\nfunction createNotificationForRole(role, ncpId, title, message, type = \"info\") {\n    const users = db.prepare(\"SELECT id FROM users WHERE role = ?\").all(role);\n    for (const user of users){\n        createNotification(user.id, ncpId, title, message, type);\n    }\n}\nfunction getNotificationsForUser(userId, limit = 10) {\n    return db.prepare(`\n    SELECT * FROM notifications \n    WHERE user_id = ? \n    ORDER BY created_at DESC \n    LIMIT ?\n  `).all(userId, limit);\n}\nfunction getUnreadNotificationCount(userId) {\n    const result = db.prepare(\"SELECT COUNT(*) as count FROM notifications WHERE user_id = ? AND is_read = FALSE\").get(userId);\n    return result.count;\n}\nfunction markNotificationAsRead(notificationId) {\n    return db.prepare(\"UPDATE notifications SET is_read = TRUE WHERE id = ?\").run(notificationId);\n}\nfunction markAllNotificationsAsRead(userId) {\n    return db.prepare(\"UPDATE notifications SET is_read = TRUE WHERE user_id = ?\").run(userId);\n}\n// Statistics functions\nfunction getNCPStatistics() {\n    const total = db.prepare(\"SELECT COUNT(*) as count FROM ncp_reports\").get();\n    const pending = db.prepare('SELECT COUNT(*) as count FROM ncp_reports WHERE status = \"pending\"').get();\n    const qaApproved = db.prepare('SELECT COUNT(*) as count FROM ncp_reports WHERE status = \"qa_approved\"').get();\n    const tlProcessed = db.prepare('SELECT COUNT(*) as count FROM ncp_reports WHERE status = \"tl_processed\"').get();\n    const rejected = db.prepare('SELECT COUNT(*) as count FROM ncp_reports WHERE status LIKE \"%rejected\"').get();\n    return {\n        total: total.count,\n        pending: pending.count,\n        qaApproved: qaApproved.count,\n        tlProcessed: tlProcessed.count,\n        rejected: rejected.count\n    };\n}\nfunction getNCPStatisticsForRole(userRole, username) {\n    let baseQuery = \"\";\n    let params = [];\n    switch(userRole){\n        case \"user\":\n            baseQuery = \"FROM ncp_reports WHERE submitted_by = ?\";\n            params = [\n                username\n            ];\n            break;\n        case \"qa_leader\":\n            baseQuery = \"FROM ncp_reports\";\n            break;\n        case \"team_leader\":\n            baseQuery = \"FROM ncp_reports WHERE assigned_team_leader = ?\";\n            params = [\n                username\n            ];\n            break;\n        default:\n            baseQuery = \"FROM ncp_reports\";\n    }\n    const total = db.prepare(`SELECT COUNT(*) as count ${baseQuery}`).get(...params);\n    const pending = db.prepare(`SELECT COUNT(*) as count ${baseQuery} AND status = 'pending'`).get(...params);\n    const approved = db.prepare(`SELECT COUNT(*) as count ${baseQuery} AND status LIKE '%approved'`).get(...params);\n    const processed = db.prepare(`SELECT COUNT(*) as count ${baseQuery} AND status LIKE '%processed'`).get(...params);\n    return {\n        total: total.count,\n        pending: pending.count,\n        approved: approved.count,\n        processed: processed.count\n    };\n}\n// Update existing records to have default values for new columns\nfunction updateExistingRecords() {\n    const updateQuery = `\n    UPDATE ncp_reports SET \n      jumlah_sortir = COALESCE(jumlah_sortir, '0'),\n      jumlah_release = COALESCE(jumlah_release, '0'), \n      jumlah_reject = COALESCE(jumlah_reject, '0')\n    WHERE jumlah_sortir IS NULL OR jumlah_release IS NULL OR jumlah_reject IS NULL\n  `;\n    const result = db.prepare(updateQuery).run();\n    return result;\n}\n// Initialize database on import\ninitializeDatabase();\nupdateExistingRecords();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxHQUFHRyxPQUFPLENBQUMsQ0FBQyx5QkFBeUIsRUFBRThHLFVBQVUsdUJBQXVCLENBQUMsRUFBRTdHLEdBQUcsSUFBSXNEO0lBQ2xHLE1BQU13RCxXQUFXbEgsR0FBR0csT0FBTyxDQUFDLENBQUMseUJBQXlCLEVBQUU4RyxVQUFVLDRCQUE0QixDQUFDLEVBQUU3RyxHQUFHLElBQUlzRDtJQUN4RyxNQUFNeUQsWUFBWW5ILEdBQUdHLE9BQU8sQ0FBQyxDQUFDLHlCQUF5QixFQUFFOEcsVUFBVSw2QkFBNkIsQ0FBQyxFQUFFN0csR0FBRyxJQUFJc0Q7SUFFMUcsT0FBTztRQUNMaUQsT0FBT0EsTUFBTUwsS0FBSztRQUNsQk0sU0FBU0EsUUFBUU4sS0FBSztRQUN0QlksVUFBVUEsU0FBU1osS0FBSztRQUN4QmEsV0FBV0EsVUFBVWIsS0FBSztJQUM1QjtBQUNGO0FBRUEsaUVBQWlFO0FBQzFELFNBQVNjO0lBQ2QsTUFBTUMsY0FBYyxDQUFDOzs7Ozs7RUFNckIsQ0FBQztJQUVELE1BQU0vRSxTQUFTdEMsR0FBR0csT0FBTyxDQUFDa0gsYUFBYTlFLEdBQUc7SUFDMUMsT0FBT0Q7QUFDVDtBQUVBLGdDQUFnQztBQUNoQ3JDO0FBQ0FtSDtBQUVhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2xpYi9kYXRhYmFzZS50cz80ZDQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEYXRhYmFzZSBmcm9tIFwiYmV0dGVyLXNxbGl0ZTNcIlxuaW1wb3J0IHsgY29tcGFyZSB9IGZyb20gXCJiY3J5cHRqc1wiXG5cbi8vIERhdGFiYXNlIHNjaGVtYSBhbmQgY29ubmVjdGlvblxuY29uc3QgZGIgPSBuZXcgRGF0YWJhc2UoXCJxYV9wb3J0YWwuZGJcIilcblxuLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZSB0YWJsZXMgKGNhbGxlZCBvbmx5IGlmIHRhYmxlcyBkb24ndCBleGlzdClcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplRGF0YWJhc2UoKSB7XG4gIC8vIENoZWNrIGlmIHRhYmxlcyBleGlzdFxuICBjb25zdCB0YWJsZXNFeGlzdCA9IGRiLnByZXBhcmUoXCJTRUxFQ1QgbmFtZSBGUk9NIHNxbGl0ZV9tYXN0ZXIgV0hFUkUgdHlwZT0ndGFibGUnIEFORCBuYW1lPSd1c2VycydcIikuZ2V0KClcbiAgaWYgKHRhYmxlc0V4aXN0KSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICAvLyBVc2VycyB0YWJsZVxuICBkYi5leGVjKGBcbiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyB1c2VycyAoXG4gICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXG4gICAgICB1c2VybmFtZSBURVhUIFVOSVFVRSBOT1QgTlVMTCxcbiAgICAgIHBhc3N3b3JkIFRFWFQgTk9UIE5VTEwsXG4gICAgICByb2xlIFRFWFQgREVGQVVMVCAndXNlcicsXG4gICAgICBmdWxsX25hbWUgVEVYVCxcbiAgICAgIGNyZWF0ZWRfYXQgREFURVRJTUUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUFxuICAgIClcbiAgYClcblxuICAvLyBOQ1AgUmVwb3J0cyB0YWJsZSB3aXRoIGV4dGVuZGVkIGZpZWxkcyBmb3IgYXBwcm92YWwgd29ya2Zsb3dcbiAgZGIuZXhlYyhgXG4gICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgbmNwX3JlcG9ydHMgKFxuICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgbmNwX2lkIFRFWFQgVU5JUVVFIE5PVCBOVUxMLFxuICAgICAgc2t1X2NvZGUgVEVYVCBOT1QgTlVMTCxcbiAgICAgIG1hY2hpbmVfY29kZSBURVhUIE5PVCBOVUxMLFxuICAgICAgZGF0ZSBURVhUIE5PVCBOVUxMLFxuICAgICAgdGltZV9pbmNpZGVudCBURVhUIE5PVCBOVUxMLFxuICAgICAgaG9sZF9xdWFudGl0eSBJTlRFR0VSIE5PVCBOVUxMLFxuICAgICAgaG9sZF9xdWFudGl0eV91b20gVEVYVCBOT1QgTlVMTCxcbiAgICAgIHByb2JsZW1fZGVzY3JpcHRpb24gVEVYVCBOT1QgTlVMTCxcbiAgICAgIHBob3RvX2F0dGFjaG1lbnQgVEVYVCxcbiAgICAgIHFhX2xlYWRlciBURVhUIE5PVCBOVUxMLFxuICAgICAgc3RhdHVzIFRFWFQgREVGQVVMVCAncGVuZGluZycsXG4gICAgICBzdWJtaXR0ZWRfYnkgVEVYVCBOT1QgTlVMTCxcbiAgICAgIHN1Ym1pdHRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuXG4gICAgICAtLSBRQSBMZWFkZXIgQXBwcm92YWwgRmllbGRzXG4gICAgICBxYV9hcHByb3ZlZF9ieSBURVhULFxuICAgICAgcWFfYXBwcm92ZWRfYXQgREFURVRJTUUsXG4gICAgICBkaXNwb3Npc2kgVEVYVCxcbiAgICAgIGp1bWxhaF9zb3J0aXIgVEVYVCBERUZBVUxUICcwJyxcbiAgICAgIGp1bWxhaF9yZWxlYXNlIFRFWFQgREVGQVVMVCAnMCcsXG4gICAgICBqdW1sYWhfcmVqZWN0IFRFWFQgREVGQVVMVCAnMCcsXG4gICAgICBhc3NpZ25lZF90ZWFtX2xlYWRlciBURVhULFxuICAgICAgcWFfcmVqZWN0aW9uX3JlYXNvbiBURVhULFxuXG4gICAgICAtLSBUZWFtIExlYWRlciBGaWVsZHNcbiAgICAgIHRsX3Byb2Nlc3NlZF9ieSBURVhULFxuICAgICAgdGxfcHJvY2Vzc2VkX2F0IERBVEVUSU1FLFxuICAgICAgcm9vdF9jYXVzZV9hbmFseXNpcyBURVhULFxuICAgICAgY29ycmVjdGl2ZV9hY3Rpb24gVEVYVCxcbiAgICAgIHByZXZlbnRpdmVfYWN0aW9uIFRFWFQsXG5cbiAgICAgIC0tIFByb2Nlc3MgTGVhZCBGaWVsZHNcbiAgICAgIHByb2Nlc3NfYXBwcm92ZWRfYnkgVEVYVCxcbiAgICAgIHByb2Nlc3NfYXBwcm92ZWRfYXQgREFURVRJTUUsXG4gICAgICBwcm9jZXNzX3JlamVjdGlvbl9yZWFzb24gVEVYVCxcbiAgICAgIHByb2Nlc3NfY29tbWVudCBURVhULFxuXG4gICAgICAtLSBRQSBNYW5hZ2VyIEZpZWxkc1xuICAgICAgbWFuYWdlcl9hcHByb3ZlZF9ieSBURVhULFxuICAgICAgbWFuYWdlcl9hcHByb3ZlZF9hdCBEQVRFVElNRSxcbiAgICAgIG1hbmFnZXJfcmVqZWN0aW9uX3JlYXNvbiBURVhULFxuICAgICAgbWFuYWdlcl9jb21tZW50IFRFWFQsXG5cbiAgICAgIC0tIEZpbmFsIHN0YXR1c1xuICAgICAgYXJjaGl2ZWRfYXQgREFURVRJTUVcbiAgICApXG4gIGApXG5cbiAgLy8gTm90aWZpY2F0aW9ucyB0YWJsZVxuICBkYi5leGVjKGBcbiAgICBDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBub3RpZmljYXRpb25zIChcbiAgICAgIGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCxcbiAgICAgIHVzZXJfaWQgSU5URUdFUiBOT1QgTlVMTCxcbiAgICAgIG5jcF9pZCBURVhUIE5PVCBOVUxMLFxuICAgICAgdGl0bGUgVEVYVCBOT1QgTlVMTCxcbiAgICAgIG1lc3NhZ2UgVEVYVCBOT1QgTlVMTCxcbiAgICAgIHR5cGUgVEVYVCBERUZBVUxUICdpbmZvJyxcbiAgICAgIGlzX3JlYWQgQk9PTEVBTiBERUZBVUxUIEZBTFNFLFxuICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgRk9SRUlHTiBLRVkgKHVzZXJfaWQpIFJFRkVSRU5DRVMgdXNlcnMgKGlkKVxuICAgIClcbiAgYClcbn1cblxuLy8gRklYRUQ6IEdlbmVyYXRlIGF1dG9tYXRpYyBOQ1AgbnVtYmVyIHdpdGggZm9ybWF0IFlZTU0tWFhYWFxuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlTkNQTnVtYmVyKCk6IHN0cmluZyB7XG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgY29uc3QgeWVhciA9IG5vdy5nZXRGdWxsWWVhcigpLnRvU3RyaW5nKCkuc2xpY2UoLTIpXG4gIGNvbnN0IG1vbnRoID0gKG5vdy5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIilcblxuICAvLyBHZXQgdGhlIGxhdGVzdCBzZXJpYWwgbnVtYmVyIGZvciBjdXJyZW50IHllYXJcbiAgY29uc3QgbGF0ZXN0UmVjb3JkID0gZGJcbiAgICAucHJlcGFyZShgXG4gICAgU0VMRUNUIG5jcF9pZCBGUk9NIG5jcF9yZXBvcnRzIFxuICAgIFdIRVJFIG5jcF9pZCBMSUtFID8gXG4gICAgT1JERVIgQlkgbmNwX2lkIERFU0MgXG4gICAgTElNSVQgMVxuICBgKVxuICAgIC5nZXQoYCR7eWVhcn0ke21vbnRofS0lYClcblxuICBsZXQgc2VyaWFsTnVtYmVyID0gMVxuXG4gIGlmIChsYXRlc3RSZWNvcmQpIHtcbiAgICBjb25zdCBleGlzdGluZ1NlcmlhbCA9IGxhdGVzdFJlY29yZC5uY3BfaWQuc3BsaXQoXCItXCIpWzFdXG4gICAgc2VyaWFsTnVtYmVyID0gTnVtYmVyLnBhcnNlSW50KGV4aXN0aW5nU2VyaWFsKSArIDFcbiAgfVxuXG4gIGNvbnN0IGZvcm1hdHRlZFNlcmlhbCA9IHNlcmlhbE51bWJlci50b1N0cmluZygpLnBhZFN0YXJ0KDQsIFwiMFwiKVxuICByZXR1cm4gYCR7eWVhcn0ke21vbnRofS0ke2Zvcm1hdHRlZFNlcmlhbH1gXG59XG5cbi8vIEZJWEVEOiBVc2VyIGF1dGhlbnRpY2F0aW9uIGZ1bmN0aW9uc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZVVzZXIodXNlcm5hbWU6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZykge1xuICBjb25zdCB1c2VyID0gZGIucHJlcGFyZShcIlNFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCIpLmdldCh1c2VybmFtZSlcbiAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbFxuXG4gIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCBjb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKVxuICBpZiAoIWlzVmFsaWQpIHJldHVybiBudWxsXG5cbiAgcmV0dXJuIHtcbiAgICBpZDogdXNlci5pZCxcbiAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcbiAgICByb2xlOiB1c2VyLnJvbGUsXG4gICAgZnVsbE5hbWU6IHVzZXIuZnVsbF9uYW1lLFxuICB9XG59XG5cbi8vIEdldCB1c2VyIGJ5IHVzZXJuYW1lXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlckJ5VXNlcm5hbWUodXNlcm5hbWU6IHN0cmluZykge1xuICByZXR1cm4gZGIucHJlcGFyZShcIlNFTEVDVCBpZCwgdXNlcm5hbWUsIHJvbGUsIGZ1bGxfbmFtZSBGUk9NIHVzZXJzIFdIRVJFIHVzZXJuYW1lID0gP1wiKS5nZXQodXNlcm5hbWUpXG59XG5cbi8vIEZJWEVEOiBOQ1AgUmVwb3J0IGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5DUFJlcG9ydChkYXRhOiBhbnkpIHtcbiAgY29uc3QgbmNwSWQgPSBnZW5lcmF0ZU5DUE51bWJlcigpXG5cbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoYFxuICAgIElOU0VSVCBJTlRPIG5jcF9yZXBvcnRzIChcbiAgICAgIG5jcF9pZCwgc2t1X2NvZGUsIG1hY2hpbmVfY29kZSwgZGF0ZSwgdGltZV9pbmNpZGVudCxcbiAgICAgIGhvbGRfcXVhbnRpdHksIGhvbGRfcXVhbnRpdHlfdW9tLCBwcm9ibGVtX2Rlc2NyaXB0aW9uLFxuICAgICAgcGhvdG9fYXR0YWNobWVudCwgcWFfbGVhZGVyLCBzdWJtaXR0ZWRfYnlcbiAgICApIFZBTFVFUyAoPywgPywgPywgPywgPywgPywgPywgPywgPywgPywgPylcbiAgYClcblxuICBjb25zdCByZXN1bHQgPSBzdG10LnJ1bihcbiAgICBuY3BJZCxcbiAgICBkYXRhLnNrdUNvZGUsXG4gICAgZGF0YS5tYWNoaW5lQ29kZSxcbiAgICBkYXRhLmRhdGUsXG4gICAgZGF0YS50aW1lSW5jaWRlbnQsXG4gICAgZGF0YS5ob2xkUXVhbnRpdHksXG4gICAgZGF0YS5ob2xkUXVhbnRpdHlVT00sXG4gICAgZGF0YS5wcm9ibGVtRGVzY3JpcHRpb24sXG4gICAgZGF0YS5waG90b0F0dGFjaG1lbnQsXG4gICAgZGF0YS5xYUxlYWRlcixcbiAgICBkYXRhLnN1Ym1pdHRlZEJ5LFxuICApXG5cbiAgLy8gQ3JlYXRlIG5vdGlmaWNhdGlvbiBmb3IgUUEgTGVhZGVyc1xuICBjcmVhdGVOb3RpZmljYXRpb25Gb3JSb2xlKFwicWFfbGVhZGVyXCIsIG5jcElkLCBcIk5ldyBOQ1AgU3VibWl0dGVkXCIsIGBOQ1AgJHtuY3BJZH0gcmVxdWlyZXMgeW91ciBhcHByb3ZhbGApXG5cbiAgcmV0dXJuIHsgaWQ6IHJlc3VsdC5sYXN0SW5zZXJ0Um93aWQsIG5jcElkIH1cbn1cblxuLy8gR2V0IGFsbCBOQ1AgcmVwb3J0cyBmb3IgZGF0YWJhc2UgdmlldyBhbmQgZmxvdyB0cmFja2VyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWxsTkNQUmVwb3J0cygpIHtcbiAgcmV0dXJuIGRiLnByZXBhcmUoXCJTRUxFQ1QgKiBGUk9NIG5jcF9yZXBvcnRzIE9SREVSIEJZIHN1Ym1pdHRlZF9hdCBERVNDXCIpLmFsbCgpXG59XG5cbi8vIEdldCBOQ1BzIGJhc2VkIG9uIHVzZXIgcm9sZSBhbmQgcGVybWlzc2lvbnNcbmV4cG9ydCBmdW5jdGlvbiBnZXROQ1BSZXBvcnRzRm9yVXNlcih1c2VySWQ6IG51bWJlciwgdXNlclJvbGU6IHN0cmluZywgdXNlcm5hbWU6IHN0cmluZykge1xuICBsZXQgcXVlcnkgPSBcIlNFTEVDVCAqIEZST00gbmNwX3JlcG9ydHNcIlxuICBsZXQgcGFyYW1zOiBhbnlbXSA9IFtdXG5cbiAgc3dpdGNoICh1c2VyUm9sZSkge1xuICAgIGNhc2UgXCJ1c2VyXCI6XG4gICAgICBxdWVyeSArPSBcIiBXSEVSRSBzdWJtaXR0ZWRfYnkgPSA/IE9SREVSIEJZIHN1Ym1pdHRlZF9hdCBERVNDXCJcbiAgICAgIHBhcmFtcyA9IFt1c2VybmFtZV1cbiAgICAgIGJyZWFrXG4gICAgY2FzZSBcInFhX2xlYWRlclwiOlxuICAgICAgcXVlcnkgKz0gXCIgT1JERVIgQlkgc3VibWl0dGVkX2F0IERFU0NcIlxuICAgICAgYnJlYWtcbiAgICBjYXNlIFwidGVhbV9sZWFkZXJcIjpcbiAgICAgIHF1ZXJ5ICs9IFwiIFdIRVJFIGFzc2lnbmVkX3RlYW1fbGVhZGVyID0gPyBPUkRFUiBCWSBzdWJtaXR0ZWRfYXQgREVTQ1wiXG4gICAgICBwYXJhbXMgPSBbdXNlcm5hbWVdXG4gICAgICBicmVha1xuICAgIGNhc2UgXCJwcm9jZXNzX2xlYWRcIjpcbiAgICAgIHF1ZXJ5ICs9IFwiIFdIRVJFIHN0YXR1cyBJTiAoJ3RsX3Byb2Nlc3NlZCcsICdwcm9jZXNzX2FwcHJvdmVkJywgJ3Byb2Nlc3NfcmVqZWN0ZWQnKSBPUkRFUiBCWSBzdWJtaXR0ZWRfYXQgREVTQ1wiXG4gICAgICBicmVha1xuICAgIGNhc2UgXCJxYV9tYW5hZ2VyXCI6XG4gICAgY2FzZSBcImFkbWluXCI6XG4gICAgICBxdWVyeSArPSBcIiBPUkRFUiBCWSBzdWJtaXR0ZWRfYXQgREVTQ1wiXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICBxdWVyeSArPSBcIiBXSEVSRSBzdWJtaXR0ZWRfYnkgPSA/IE9SREVSIEJZIHN1Ym1pdHRlZF9hdCBERVNDXCJcbiAgICAgIHBhcmFtcyA9IFt1c2VybmFtZV1cbiAgfVxuXG4gIGNvbnN0IHJlc3VsdHMgPSBkYi5wcmVwYXJlKHF1ZXJ5KS5hbGwoLi4ucGFyYW1zKVxuICByZXR1cm4gcmVzdWx0c1xufVxuXG4vLyBHZXQgcGVuZGluZyBOQ1BzIGZvciBhcHByb3ZhbCBiYXNlZCBvbiByb2xlXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGVuZGluZ05DUHNGb3JSb2xlKHVzZXJSb2xlOiBzdHJpbmcsIHVzZXJuYW1lOiBzdHJpbmcpIHtcbiAgbGV0IHF1ZXJ5ID0gXCJcIlxuICBsZXQgcGFyYW1zOiBhbnlbXSA9IFtdXG5cbiAgc3dpdGNoICh1c2VyUm9sZSkge1xuICAgIGNhc2UgXCJxYV9sZWFkZXJcIjpcbiAgICAgIHF1ZXJ5ID0gXCJTRUxFQ1QgKiBGUk9NIG5jcF9yZXBvcnRzIFdIRVJFIHN0YXR1cyA9ICdwZW5kaW5nJyBPUkRFUiBCWSBzdWJtaXR0ZWRfYXQgQVNDXCJcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBcInRlYW1fbGVhZGVyXCI6XG4gICAgICAvLyBGSVhFRDogU2hvdyBOQ1BzIGFzc2lnbmVkIHRvIHRoaXMgdGVhbSBsZWFkZXJcbiAgICAgIHF1ZXJ5ID0gYFxuICAgICAgICBTRUxFQ1QgKiBGUk9NIG5jcF9yZXBvcnRzIFxuICAgICAgICBXSEVSRSBhc3NpZ25lZF90ZWFtX2xlYWRlciA9ID8gXG4gICAgICAgIEFORCBzdGF0dXMgSU4gKCdxYV9hcHByb3ZlZCcsICd0bF9wcm9jZXNzZWQnKSBcbiAgICAgICAgT1JERVIgQlkgcWFfYXBwcm92ZWRfYXQgQVNDXG4gICAgICBgXG4gICAgICBwYXJhbXMgPSBbdXNlcm5hbWVdXG4gICAgICBicmVha1xuICAgIGNhc2UgXCJwcm9jZXNzX2xlYWRcIjpcbiAgICAgIHF1ZXJ5ID0gXCJTRUxFQ1QgKiBGUk9NIG5jcF9yZXBvcnRzIFdIRVJFIHN0YXR1cyA9ICd0bF9wcm9jZXNzZWQnIE9SREVSIEJZIHRsX3Byb2Nlc3NlZF9hdCBBU0NcIlxuICAgICAgYnJlYWtcbiAgICBjYXNlIFwicWFfbWFuYWdlclwiOlxuICAgICAgcXVlcnkgPSBcIlNFTEVDVCAqIEZST00gbmNwX3JlcG9ydHMgV0hFUkUgc3RhdHVzID0gJ3Byb2Nlc3NfYXBwcm92ZWQnIE9SREVSIEJZIHByb2Nlc3NfYXBwcm92ZWRfYXQgQVNDXCJcbiAgICAgIGJyZWFrXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBbXVxuICB9XG5cbiAgY29uc3QgcmVzdWx0cyA9IGRiLnByZXBhcmUocXVlcnkpLmFsbCguLi5wYXJhbXMpXG4gIHJldHVybiByZXN1bHRzXG59XG5cbi8vIEdldCBzaW5nbGUgTkNQIGJ5IElEXG5leHBvcnQgZnVuY3Rpb24gZ2V0TkNQQnlJZChpZDogbnVtYmVyKSB7XG4gIGNvbnN0IHJlc3VsdCA9IGRiLnByZXBhcmUoXCJTRUxFQ1QgKiBGUk9NIG5jcF9yZXBvcnRzIFdIRVJFIGlkID0gP1wiKS5nZXQoaWQpXG4gIHJldHVybiByZXN1bHRcbn1cblxuLy8gRklYRUQ6IFFBIExlYWRlciBhcHByb3ZhbCAtIFByb3BlciBkYXRhIGZsb3cgdG8gVGVhbSBMZWFkZXJcbmV4cG9ydCBmdW5jdGlvbiBhcHByb3ZlTkNQQnlRQUxlYWRlcihpZDogbnVtYmVyLCBhcHByb3ZhbERhdGE6IGFueSwgcWFMZWFkZXJVc2VybmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKGBcbiAgICBVUERBVEUgbmNwX3JlcG9ydHMgXG4gICAgU0VUIHN0YXR1cyA9ICdxYV9hcHByb3ZlZCcsXG4gICAgICAgIHFhX2FwcHJvdmVkX2J5ID0gPyxcbiAgICAgICAgcWFfYXBwcm92ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgZGlzcG9zaXNpID0gPyxcbiAgICAgICAganVtbGFoX3NvcnRpciA9ID8sXG4gICAgICAgIGp1bWxhaF9yZWxlYXNlID0gPyxcbiAgICAgICAganVtbGFoX3JlamVjdCA9ID8sXG4gICAgICAgIGFzc2lnbmVkX3RlYW1fbGVhZGVyID0gP1xuICAgIFdIRVJFIGlkID0gP1xuICBgKVxuXG4gIGNvbnN0IHJlc3VsdCA9IHN0bXQucnVuKFxuICAgIHFhTGVhZGVyVXNlcm5hbWUsXG4gICAgYXBwcm92YWxEYXRhLmRpc3Bvc2lzaSxcbiAgICBhcHByb3ZhbERhdGEuanVtbGFoU29ydGlyIHx8IFwiMFwiLFxuICAgIGFwcHJvdmFsRGF0YS5qdW1sYWhSZWxlYXNlIHx8IFwiMFwiLFxuICAgIGFwcHJvdmFsRGF0YS5qdW1sYWhSZWplY3QgfHwgXCIwXCIsXG4gICAgYXBwcm92YWxEYXRhLmFzc2lnbmVkVGVhbUxlYWRlcixcbiAgICBpZCxcbiAgKVxuXG4gIGlmIChyZXN1bHQuY2hhbmdlcyA+IDApIHtcbiAgICAvLyBHZXQgTkNQIGRldGFpbHMgZm9yIG5vdGlmaWNhdGlvblxuICAgIGNvbnN0IG5jcCA9IGRiLnByZXBhcmUoXCJTRUxFQ1QgbmNwX2lkIEZST00gbmNwX3JlcG9ydHMgV0hFUkUgaWQgPSA/XCIpLmdldChpZClcblxuICAgIC8vIEZJWEVEOiBDcmVhdGUgbm90aWZpY2F0aW9uIGZvciBhc3NpZ25lZCB0ZWFtIGxlYWRlciB1c2luZyB0aGUgZXhhY3QgdXNlcm5hbWVcbiAgICBjb25zdCB0ZWFtTGVhZGVyVXNlciA9IGRiLnByZXBhcmUoXCJTRUxFQ1QgaWQgRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ID9cIikuZ2V0KGFwcHJvdmFsRGF0YS5hc3NpZ25lZFRlYW1MZWFkZXIpXG4gICAgaWYgKHRlYW1MZWFkZXJVc2VyKSB7XG4gICAgICBjcmVhdGVOb3RpZmljYXRpb24oXG4gICAgICAgIHRlYW1MZWFkZXJVc2VyLmlkLFxuICAgICAgICBuY3AubmNwX2lkLFxuICAgICAgICBcIk5DUCBBc3NpZ25lZCB0byBZb3VcIixcbiAgICAgICAgYE5DUCAke25jcC5uY3BfaWR9IGhhcyBiZWVuIGFwcHJvdmVkIGJ5IFFBIExlYWRlciBhbmQgYXNzaWduZWQgdG8geW91IGZvciBSQ0EgYW5hbHlzaXNgLFxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIEFsc28gY3JlYXRlIG5vdGlmaWNhdGlvbiBmb3IgYWxsIHRlYW0gbGVhZGVycyBhcyBiYWNrdXBcbiAgICBjcmVhdGVOb3RpZmljYXRpb25Gb3JSb2xlKFxuICAgICAgXCJ0ZWFtX2xlYWRlclwiLFxuICAgICAgbmNwLm5jcF9pZCxcbiAgICAgIFwiTmV3IE5DUCBBc3NpZ25tZW50XCIsXG4gICAgICBgTkNQICR7bmNwLm5jcF9pZH0gaGFzIGJlZW4gYXBwcm92ZWQgYW5kIGFzc2lnbmVkIHRvICR7YXBwcm92YWxEYXRhLmFzc2lnbmVkVGVhbUxlYWRlcn1gLFxuICAgIClcbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuLy8gUUEgTGVhZGVyIHJlamVjdGlvblxuZXhwb3J0IGZ1bmN0aW9uIHJlamVjdE5DUEJ5UUFMZWFkZXIoaWQ6IG51bWJlciwgcmVqZWN0aW9uUmVhc29uOiBzdHJpbmcsIHFhTGVhZGVyVXNlcm5hbWU6IHN0cmluZykge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShgXG4gICAgVVBEQVRFIG5jcF9yZXBvcnRzIFxuICAgIFNFVCBzdGF0dXMgPSAncWFfcmVqZWN0ZWQnLFxuICAgICAgICBxYV9hcHByb3ZlZF9ieSA9ID8sXG4gICAgICAgIHFhX2FwcHJvdmVkX2F0ID0gQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIHFhX3JlamVjdGlvbl9yZWFzb24gPSA/XG4gICAgV0hFUkUgaWQgPSA/XG4gIGApXG5cbiAgY29uc3QgcmVzdWx0ID0gc3RtdC5ydW4ocWFMZWFkZXJVc2VybmFtZSwgcmVqZWN0aW9uUmVhc29uLCBpZClcbiAgcmV0dXJuIHJlc3VsdFxufVxuXG4vLyBUZWFtIExlYWRlciBwcm9jZXNzaW5nXG5leHBvcnQgZnVuY3Rpb24gcHJvY2Vzc05DUEJ5VGVhbUxlYWRlcihpZDogbnVtYmVyLCBwcm9jZXNzRGF0YTogYW55LCB0ZWFtTGVhZGVyVXNlcm5hbWU6IHN0cmluZykge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShgXG4gICAgVVBEQVRFIG5jcF9yZXBvcnRzIFxuICAgIFNFVCBzdGF0dXMgPSAndGxfcHJvY2Vzc2VkJyxcbiAgICAgICAgdGxfcHJvY2Vzc2VkX2J5ID0gPyxcbiAgICAgICAgdGxfcHJvY2Vzc2VkX2F0ID0gQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICAgIHJvb3RfY2F1c2VfYW5hbHlzaXMgPSA/LFxuICAgICAgICBjb3JyZWN0aXZlX2FjdGlvbiA9ID8sXG4gICAgICAgIHByZXZlbnRpdmVfYWN0aW9uID0gP1xuICAgIFdIRVJFIGlkID0gP1xuICBgKVxuXG4gIGNvbnN0IHJlc3VsdCA9IHN0bXQucnVuKFxuICAgIHRlYW1MZWFkZXJVc2VybmFtZSxcbiAgICBwcm9jZXNzRGF0YS5yb290Q2F1c2VBbmFseXNpcyxcbiAgICBwcm9jZXNzRGF0YS5jb3JyZWN0aXZlQWN0aW9uLFxuICAgIHByb2Nlc3NEYXRhLnByZXZlbnRpdmVBY3Rpb24sXG4gICAgaWQsXG4gIClcblxuICBpZiAocmVzdWx0LmNoYW5nZXMgPiAwKSB7XG4gICAgLy8gR2V0IE5DUCBkZXRhaWxzIGZvciBub3RpZmljYXRpb25cbiAgICBjb25zdCBuY3AgPSBkYi5wcmVwYXJlKFwiU0VMRUNUIG5jcF9pZCBGUk9NIG5jcF9yZXBvcnRzIFdIRVJFIGlkID0gP1wiKS5nZXQoaWQpXG5cbiAgICAvLyBDcmVhdGUgbm90aWZpY2F0aW9uIGZvciBwcm9jZXNzIGxlYWRzXG4gICAgY3JlYXRlTm90aWZpY2F0aW9uRm9yUm9sZShcbiAgICAgIFwicHJvY2Vzc19sZWFkXCIsXG4gICAgICBuY3AubmNwX2lkLFxuICAgICAgXCJOQ1AgUmVhZHkgZm9yIFByb2Nlc3MgUmV2aWV3XCIsXG4gICAgICBgTkNQICR7bmNwLm5jcF9pZH0gaGFzIGJlZW4gcHJvY2Vzc2VkIGJ5IFRlYW0gTGVhZGVyIGFuZCByZXF1aXJlcyBwcm9jZXNzIHJldmlld2AsXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG4vLyBQcm9jZXNzIExlYWQgYXBwcm92YWwgZnVuY3Rpb25zXG5leHBvcnQgZnVuY3Rpb24gYXBwcm92ZU5DUEJ5UHJvY2Vzc0xlYWQoaWQ6IG51bWJlciwgY29tbWVudDogc3RyaW5nLCBwcm9jZXNzTGVhZFVzZXJuYW1lOiBzdHJpbmcpIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoYFxuICAgIFVQREFURSBuY3BfcmVwb3J0cyBcbiAgICBTRVQgc3RhdHVzID0gJ3Byb2Nlc3NfYXBwcm92ZWQnLFxuICAgICAgICBwcm9jZXNzX2FwcHJvdmVkX2J5ID0gPyxcbiAgICAgICAgcHJvY2Vzc19hcHByb3ZlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICBwcm9jZXNzX2NvbW1lbnQgPSA/XG4gICAgV0hFUkUgaWQgPSA/XG4gIGApXG5cbiAgY29uc3QgcmVzdWx0ID0gc3RtdC5ydW4ocHJvY2Vzc0xlYWRVc2VybmFtZSwgY29tbWVudCwgaWQpXG5cbiAgaWYgKHJlc3VsdC5jaGFuZ2VzID4gMCkge1xuICAgIC8vIEdldCBOQ1AgZGV0YWlscyBmb3Igbm90aWZpY2F0aW9uXG4gICAgY29uc3QgbmNwID0gZGIucHJlcGFyZShcIlNFTEVDVCBuY3BfaWQgRlJPTSBuY3BfcmVwb3J0cyBXSEVSRSBpZCA9ID9cIikuZ2V0KGlkKVxuXG4gICAgLy8gQ3JlYXRlIG5vdGlmaWNhdGlvbiBmb3IgUUEgTWFuYWdlcnNcbiAgICBjcmVhdGVOb3RpZmljYXRpb25Gb3JSb2xlKFxuICAgICAgXCJxYV9tYW5hZ2VyXCIsXG4gICAgICBuY3AubmNwX2lkLFxuICAgICAgXCJOQ1AgUmVhZHkgZm9yIEZpbmFsIEFwcHJvdmFsXCIsXG4gICAgICBgTkNQICR7bmNwLm5jcF9pZH0gaGFzIGJlZW4gYXBwcm92ZWQgYnkgUHJvY2VzcyBMZWFkIGFuZCByZXF1aXJlcyBmaW5hbCBRQSBNYW5hZ2VyIGFwcHJvdmFsYCxcbiAgICApXG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWplY3ROQ1BCeVByb2Nlc3NMZWFkKGlkOiBudW1iZXIsIHJlamVjdGlvblJlYXNvbjogc3RyaW5nLCBwcm9jZXNzTGVhZFVzZXJuYW1lOiBzdHJpbmcpIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoYFxuICAgIFVQREFURSBuY3BfcmVwb3J0cyBcbiAgICBTRVQgc3RhdHVzID0gJ3FhX2FwcHJvdmVkJyxcbiAgICAgICAgcHJvY2Vzc19hcHByb3ZlZF9ieSA9ID8sXG4gICAgICAgIHByb2Nlc3NfYXBwcm92ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgcHJvY2Vzc19yZWplY3Rpb25fcmVhc29uID0gP1xuICAgIFdIRVJFIGlkID0gP1xuICBgKVxuXG4gIGNvbnN0IHJlc3VsdCA9IHN0bXQucnVuKHByb2Nlc3NMZWFkVXNlcm5hbWUsIHJlamVjdGlvblJlYXNvbiwgaWQpXG5cbiAgaWYgKHJlc3VsdC5jaGFuZ2VzID4gMCkge1xuICAgIC8vIEdldCBOQ1AgZGV0YWlscyBmb3Igbm90aWZpY2F0aW9uXG4gICAgY29uc3QgbmNwID0gZGIucHJlcGFyZShcIlNFTEVDVCBuY3BfaWQsIGFzc2lnbmVkX3RlYW1fbGVhZGVyIEZST00gbmNwX3JlcG9ydHMgV0hFUkUgaWQgPSA/XCIpLmdldChpZClcblxuICAgIC8vIENyZWF0ZSBub3RpZmljYXRpb24gZm9yIGFzc2lnbmVkIHRlYW0gbGVhZGVyXG4gICAgY29uc3QgdGVhbUxlYWRlclVzZXIgPSBkYi5wcmVwYXJlKFwiU0VMRUNUIGlkIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCIpLmdldChuY3AuYXNzaWduZWRfdGVhbV9sZWFkZXIpXG4gICAgaWYgKHRlYW1MZWFkZXJVc2VyKSB7XG4gICAgICBjcmVhdGVOb3RpZmljYXRpb24oXG4gICAgICAgIHRlYW1MZWFkZXJVc2VyLmlkLFxuICAgICAgICBuY3AubmNwX2lkLFxuICAgICAgICBcIk5DUCBSZWplY3RlZCBieSBQcm9jZXNzIExlYWRcIixcbiAgICAgICAgYE5DUCAke25jcC5uY3BfaWR9IGhhcyBiZWVuIHJlamVjdGVkIGJ5IFByb2Nlc3MgTGVhZCBhbmQgcmV0dXJuZWQgZm9yIHJlcHJvY2Vzc2luZy4gUmVhc29uOiAke3JlamVjdGlvblJlYXNvbn1gLFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuLy8gUUEgTWFuYWdlciBhcHByb3ZhbCBmdW5jdGlvbnNcbmV4cG9ydCBmdW5jdGlvbiBhcHByb3ZlTkNQQnlRQU1hbmFnZXIoaWQ6IG51bWJlciwgY29tbWVudDogc3RyaW5nLCBxYU1hbmFnZXJVc2VybmFtZTogc3RyaW5nKSB7XG4gIGNvbnN0IHN0bXQgPSBkYi5wcmVwYXJlKGBcbiAgICBVUERBVEUgbmNwX3JlcG9ydHMgXG4gICAgU0VUIHN0YXR1cyA9ICdtYW5hZ2VyX2FwcHJvdmVkJyxcbiAgICAgICAgbWFuYWdlcl9hcHByb3ZlZF9ieSA9ID8sXG4gICAgICAgIG1hbmFnZXJfYXBwcm92ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUCxcbiAgICAgICAgbWFuYWdlcl9jb21tZW50ID0gPyxcbiAgICAgICAgYXJjaGl2ZWRfYXQgPSBDVVJSRU5UX1RJTUVTVEFNUFxuICAgIFdIRVJFIGlkID0gP1xuICBgKVxuXG4gIGNvbnN0IHJlc3VsdCA9IHN0bXQucnVuKHFhTWFuYWdlclVzZXJuYW1lLCBjb21tZW50LCBpZClcblxuICBpZiAocmVzdWx0LmNoYW5nZXMgPiAwKSB7XG4gICAgLy8gR2V0IE5DUCBkZXRhaWxzIGZvciBub3RpZmljYXRpb25cbiAgICBjb25zdCBuY3AgPSBkYi5wcmVwYXJlKFwiU0VMRUNUIG5jcF9pZCwgc3VibWl0dGVkX2J5IEZST00gbmNwX3JlcG9ydHMgV0hFUkUgaWQgPSA/XCIpLmdldChpZClcblxuICAgIC8vIENyZWF0ZSBub3RpZmljYXRpb24gZm9yIG9yaWdpbmFsIHN1Ym1pdHRlclxuICAgIGNvbnN0IHN1Ym1pdHRlclVzZXIgPSBkYi5wcmVwYXJlKFwiU0VMRUNUIGlkIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCIpLmdldChuY3Auc3VibWl0dGVkX2J5KVxuICAgIGlmIChzdWJtaXR0ZXJVc2VyKSB7XG4gICAgICBjcmVhdGVOb3RpZmljYXRpb24oXG4gICAgICAgIHN1Ym1pdHRlclVzZXIuaWQsXG4gICAgICAgIG5jcC5uY3BfaWQsXG4gICAgICAgIFwiTkNQIFdvcmtmbG93IENvbXBsZXRlZFwiLFxuICAgICAgICBgTkNQICR7bmNwLm5jcF9pZH0gaGFzIGJlZW4gZnVsbHkgYXBwcm92ZWQgYW5kIGFyY2hpdmVkLiBUaGUgd29ya2Zsb3cgaXMgbm93IGNvbXBsZXRlLmAsXG4gICAgICApXG4gICAgfVxuXG4gICAgLy8gQWxzbyBub3RpZnkgUUEgTGVhZGVyXG4gICAgY29uc3QgbmNwRGV0YWlscyA9IGRiLnByZXBhcmUoXCJTRUxFQ1QgcWFfYXBwcm92ZWRfYnkgRlJPTSBuY3BfcmVwb3J0cyBXSEVSRSBpZCA9ID9cIikuZ2V0KGlkKVxuICAgIGlmIChuY3BEZXRhaWxzLnFhX2FwcHJvdmVkX2J5KSB7XG4gICAgICBjb25zdCBxYUxlYWRlclVzZXIgPSBkYi5wcmVwYXJlKFwiU0VMRUNUIGlkIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCIpLmdldChuY3BEZXRhaWxzLnFhX2FwcHJvdmVkX2J5KVxuICAgICAgaWYgKHFhTGVhZGVyVXNlcikge1xuICAgICAgICBjcmVhdGVOb3RpZmljYXRpb24oXG4gICAgICAgICAgcWFMZWFkZXJVc2VyLmlkLFxuICAgICAgICAgIG5jcC5uY3BfaWQsXG4gICAgICAgICAgXCJOQ1AgV29ya2Zsb3cgQ29tcGxldGVkXCIsXG4gICAgICAgICAgYE5DUCAke25jcC5uY3BfaWR9IGhhcyBiZWVuIGZ1bGx5IGFwcHJvdmVkIGJ5IFFBIE1hbmFnZXIgYW5kIGFyY2hpdmVkLmAsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWplY3ROQ1BCeVFBTWFuYWdlcihpZDogbnVtYmVyLCByZWplY3Rpb25SZWFzb246IHN0cmluZywgcWFNYW5hZ2VyVXNlcm5hbWU6IHN0cmluZykge1xuICBjb25zdCBzdG10ID0gZGIucHJlcGFyZShgXG4gICAgVVBEQVRFIG5jcF9yZXBvcnRzIFxuICAgIFNFVCBzdGF0dXMgPSAncWFfYXBwcm92ZWQnLFxuICAgICAgICBtYW5hZ2VyX2FwcHJvdmVkX2J5ID0gPyxcbiAgICAgICAgbWFuYWdlcl9hcHByb3ZlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICBtYW5hZ2VyX3JlamVjdGlvbl9yZWFzb24gPSA/XG4gICAgV0hFUkUgaWQgPSA/XG4gIGApXG5cbiAgY29uc3QgcmVzdWx0ID0gc3RtdC5ydW4ocWFNYW5hZ2VyVXNlcm5hbWUsIHJlamVjdGlvblJlYXNvbiwgaWQpXG5cbiAgaWYgKHJlc3VsdC5jaGFuZ2VzID4gMCkge1xuICAgIC8vIEdldCBOQ1AgZGV0YWlscyBmb3Igbm90aWZpY2F0aW9uXG4gICAgY29uc3QgbmNwID0gZGIucHJlcGFyZShcIlNFTEVDVCBuY3BfaWQsIGFzc2lnbmVkX3RlYW1fbGVhZGVyIEZST00gbmNwX3JlcG9ydHMgV0hFUkUgaWQgPSA/XCIpLmdldChpZClcblxuICAgIC8vIENyZWF0ZSBub3RpZmljYXRpb24gZm9yIGFzc2lnbmVkIHRlYW0gbGVhZGVyXG4gICAgY29uc3QgdGVhbUxlYWRlclVzZXIgPSBkYi5wcmVwYXJlKFwiU0VMRUNUIGlkIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSA/XCIpLmdldChuY3AuYXNzaWduZWRfdGVhbV9sZWFkZXIpXG4gICAgaWYgKHRlYW1MZWFkZXJVc2VyKSB7XG4gICAgICBjcmVhdGVOb3RpZmljYXRpb24oXG4gICAgICAgIHRlYW1MZWFkZXJVc2VyLmlkLFxuICAgICAgICBuY3AubmNwX2lkLFxuICAgICAgICBcIk5DUCBSZWplY3RlZCBieSBRQSBNYW5hZ2VyXCIsXG4gICAgICAgIGBOQ1AgJHtuY3AubmNwX2lkfSBoYXMgYmVlbiByZWplY3RlZCBieSBRQSBNYW5hZ2VyIGFuZCByZXR1cm5lZCBmb3IgcmVwcm9jZXNzaW5nLiBSZWFzb246ICR7cmVqZWN0aW9uUmVhc29ufWAsXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdFxufVxuXG4vLyBGSVhFRDogTm90aWZpY2F0aW9uIGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU5vdGlmaWNhdGlvbih1c2VySWQ6IG51bWJlciwgbmNwSWQ6IHN0cmluZywgdGl0bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCB0eXBlID0gXCJpbmZvXCIpIHtcbiAgY29uc3Qgc3RtdCA9IGRiLnByZXBhcmUoYFxuICAgIElOU0VSVCBJTlRPIG5vdGlmaWNhdGlvbnMgKHVzZXJfaWQsIG5jcF9pZCwgdGl0bGUsIG1lc3NhZ2UsIHR5cGUpXG4gICAgVkFMVUVTICg/LCA/LCA/LCA/LCA/KVxuICBgKVxuXG4gIGNvbnN0IHJlc3VsdCA9IHN0bXQucnVuKHVzZXJJZCwgbmNwSWQsIHRpdGxlLCBtZXNzYWdlLCB0eXBlKVxuICByZXR1cm4gcmVzdWx0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOb3RpZmljYXRpb25Gb3JSb2xlKHJvbGU6IHN0cmluZywgbmNwSWQ6IHN0cmluZywgdGl0bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCB0eXBlID0gXCJpbmZvXCIpIHtcbiAgY29uc3QgdXNlcnMgPSBkYi5wcmVwYXJlKFwiU0VMRUNUIGlkIEZST00gdXNlcnMgV0hFUkUgcm9sZSA9ID9cIikuYWxsKHJvbGUpXG5cbiAgZm9yIChjb25zdCB1c2VyIG9mIHVzZXJzKSB7XG4gICAgY3JlYXRlTm90aWZpY2F0aW9uKHVzZXIuaWQsIG5jcElkLCB0aXRsZSwgbWVzc2FnZSwgdHlwZSlcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Tm90aWZpY2F0aW9uc0ZvclVzZXIodXNlcklkOiBudW1iZXIsIGxpbWl0ID0gMTApIHtcbiAgcmV0dXJuIGRiXG4gICAgLnByZXBhcmUoYFxuICAgIFNFTEVDVCAqIEZST00gbm90aWZpY2F0aW9ucyBcbiAgICBXSEVSRSB1c2VyX2lkID0gPyBcbiAgICBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0MgXG4gICAgTElNSVQgP1xuICBgKVxuICAgIC5hbGwodXNlcklkLCBsaW1pdClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFVucmVhZE5vdGlmaWNhdGlvbkNvdW50KHVzZXJJZDogbnVtYmVyKSB7XG4gIGNvbnN0IHJlc3VsdCA9IGRiXG4gICAgLnByZXBhcmUoXCJTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBub3RpZmljYXRpb25zIFdIRVJFIHVzZXJfaWQgPSA/IEFORCBpc19yZWFkID0gRkFMU0VcIilcbiAgICAuZ2V0KHVzZXJJZClcbiAgcmV0dXJuIHJlc3VsdC5jb3VudFxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFya05vdGlmaWNhdGlvbkFzUmVhZChub3RpZmljYXRpb25JZDogbnVtYmVyKSB7XG4gIHJldHVybiBkYi5wcmVwYXJlKFwiVVBEQVRFIG5vdGlmaWNhdGlvbnMgU0VUIGlzX3JlYWQgPSBUUlVFIFdIRVJFIGlkID0gP1wiKS5ydW4obm90aWZpY2F0aW9uSWQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXJrQWxsTm90aWZpY2F0aW9uc0FzUmVhZCh1c2VySWQ6IG51bWJlcikge1xuICByZXR1cm4gZGIucHJlcGFyZShcIlVQREFURSBub3RpZmljYXRpb25zIFNFVCBpc19yZWFkID0gVFJVRSBXSEVSRSB1c2VyX2lkID0gP1wiKS5ydW4odXNlcklkKVxufVxuXG4vLyBTdGF0aXN0aWNzIGZ1bmN0aW9uc1xuZXhwb3J0IGZ1bmN0aW9uIGdldE5DUFN0YXRpc3RpY3MoKSB7XG4gIGNvbnN0IHRvdGFsID0gZGIucHJlcGFyZShcIlNFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIG5jcF9yZXBvcnRzXCIpLmdldCgpXG4gIGNvbnN0IHBlbmRpbmcgPSBkYi5wcmVwYXJlKCdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBuY3BfcmVwb3J0cyBXSEVSRSBzdGF0dXMgPSBcInBlbmRpbmdcIicpLmdldCgpXG4gIGNvbnN0IHFhQXBwcm92ZWQgPSBkYi5wcmVwYXJlKCdTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSBuY3BfcmVwb3J0cyBXSEVSRSBzdGF0dXMgPSBcInFhX2FwcHJvdmVkXCInKS5nZXQoKVxuICBjb25zdCB0bFByb2Nlc3NlZCA9IGRiLnByZXBhcmUoJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIG5jcF9yZXBvcnRzIFdIRVJFIHN0YXR1cyA9IFwidGxfcHJvY2Vzc2VkXCInKS5nZXQoKVxuICBjb25zdCByZWplY3RlZCA9IGRiLnByZXBhcmUoJ1NFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIG5jcF9yZXBvcnRzIFdIRVJFIHN0YXR1cyBMSUtFIFwiJXJlamVjdGVkXCInKS5nZXQoKVxuXG4gIHJldHVybiB7XG4gICAgdG90YWw6IHRvdGFsLmNvdW50LFxuICAgIHBlbmRpbmc6IHBlbmRpbmcuY291bnQsXG4gICAgcWFBcHByb3ZlZDogcWFBcHByb3ZlZC5jb3VudCxcbiAgICB0bFByb2Nlc3NlZDogdGxQcm9jZXNzZWQuY291bnQsXG4gICAgcmVqZWN0ZWQ6IHJlamVjdGVkLmNvdW50LFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXROQ1BTdGF0aXN0aWNzRm9yUm9sZSh1c2VyUm9sZTogc3RyaW5nLCB1c2VybmFtZTogc3RyaW5nKSB7XG4gIGxldCBiYXNlUXVlcnkgPSBcIlwiXG4gIGxldCBwYXJhbXM6IGFueVtdID0gW11cblxuICBzd2l0Y2ggKHVzZXJSb2xlKSB7XG4gICAgY2FzZSBcInVzZXJcIjpcbiAgICAgIGJhc2VRdWVyeSA9IFwiRlJPTSBuY3BfcmVwb3J0cyBXSEVSRSBzdWJtaXR0ZWRfYnkgPSA/XCJcbiAgICAgIHBhcmFtcyA9IFt1c2VybmFtZV1cbiAgICAgIGJyZWFrXG4gICAgY2FzZSBcInFhX2xlYWRlclwiOlxuICAgICAgYmFzZVF1ZXJ5ID0gXCJGUk9NIG5jcF9yZXBvcnRzXCJcbiAgICAgIGJyZWFrXG4gICAgY2FzZSBcInRlYW1fbGVhZGVyXCI6XG4gICAgICBiYXNlUXVlcnkgPSBcIkZST00gbmNwX3JlcG9ydHMgV0hFUkUgYXNzaWduZWRfdGVhbV9sZWFkZXIgPSA/XCJcbiAgICAgIHBhcmFtcyA9IFt1c2VybmFtZV1cbiAgICAgIGJyZWFrXG4gICAgZGVmYXVsdDpcbiAgICAgIGJhc2VRdWVyeSA9IFwiRlJPTSBuY3BfcmVwb3J0c1wiXG4gIH1cblxuICBjb25zdCB0b3RhbCA9IGRiLnByZXBhcmUoYFNFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCAke2Jhc2VRdWVyeX1gKS5nZXQoLi4ucGFyYW1zKVxuICBjb25zdCBwZW5kaW5nID0gZGIucHJlcGFyZShgU0VMRUNUIENPVU5UKCopIGFzIGNvdW50ICR7YmFzZVF1ZXJ5fSBBTkQgc3RhdHVzID0gJ3BlbmRpbmcnYCkuZ2V0KC4uLnBhcmFtcylcbiAgY29uc3QgYXBwcm92ZWQgPSBkYi5wcmVwYXJlKGBTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgJHtiYXNlUXVlcnl9IEFORCBzdGF0dXMgTElLRSAnJWFwcHJvdmVkJ2ApLmdldCguLi5wYXJhbXMpXG4gIGNvbnN0IHByb2Nlc3NlZCA9IGRiLnByZXBhcmUoYFNFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCAke2Jhc2VRdWVyeX0gQU5EIHN0YXR1cyBMSUtFICclcHJvY2Vzc2VkJ2ApLmdldCguLi5wYXJhbXMpXG5cbiAgcmV0dXJuIHtcbiAgICB0b3RhbDogdG90YWwuY291bnQsXG4gICAgcGVuZGluZzogcGVuZGluZy5jb3VudCxcbiAgICBhcHByb3ZlZDogYXBwcm92ZWQuY291bnQsXG4gICAgcHJvY2Vzc2VkOiBwcm9jZXNzZWQuY291bnQsXG4gIH1cbn1cblxuLy8gVXBkYXRlIGV4aXN0aW5nIHJlY29yZHMgdG8gaGF2ZSBkZWZhdWx0IHZhbHVlcyBmb3IgbmV3IGNvbHVtbnNcbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVFeGlzdGluZ1JlY29yZHMoKSB7XG4gIGNvbnN0IHVwZGF0ZVF1ZXJ5ID0gYFxuICAgIFVQREFURSBuY3BfcmVwb3J0cyBTRVQgXG4gICAgICBqdW1sYWhfc29ydGlyID0gQ09BTEVTQ0UoanVtbGFoX3NvcnRpciwgJzAnKSxcbiAgICAgIGp1bWxhaF9yZWxlYXNlID0gQ09BTEVTQ0UoanVtbGFoX3JlbGVhc2UsICcwJyksIFxuICAgICAganVtbGFoX3JlamVjdCA9IENPQUxFU0NFKGp1bWxhaF9yZWplY3QsICcwJylcbiAgICBXSEVSRSBqdW1sYWhfc29ydGlyIElTIE5VTEwgT1IganVtbGFoX3JlbGVhc2UgSVMgTlVMTCBPUiBqdW1sYWhfcmVqZWN0IElTIE5VTExcbiAgYFxuXG4gIGNvbnN0IHJlc3VsdCA9IGRiLnByZXBhcmUodXBkYXRlUXVlcnkpLnJ1bigpXG4gIHJldHVybiByZXN1bHRcbn1cblxuLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZSBvbiBpbXBvcnRcbmluaXRpYWxpemVEYXRhYmFzZSgpXG51cGRhdGVFeGlzdGluZ1JlY29yZHMoKVxuXG5leHBvcnQgeyBkYiB9Il0sIm5hbWVzIjpbIkRhdGFiYXNlIiwiY29tcGFyZSIsImRiIiwiaW5pdGlhbGl6ZURhdGFiYXNlIiwidGFibGVzRXhpc3QiLCJwcmVwYXJlIiwiZ2V0IiwiZXhlYyIsImdlbmVyYXRlTkNQTnVtYmVyIiwibm93IiwiRGF0ZSIsInllYXIiLCJnZXRGdWxsWWVhciIsInRvU3RyaW5nIiwic2xpY2UiLCJtb250aCIsImdldE1vbnRoIiwicGFkU3RhcnQiLCJsYXRlc3RSZWNvcmQiLCJzZXJpYWxOdW1iZXIiLCJleGlzdGluZ1NlcmlhbCIsIm5jcF9pZCIsInNwbGl0IiwiTnVtYmVyIiwicGFyc2VJbnQiLCJmb3JtYXR0ZWRTZXJpYWwiLCJhdXRoZW50aWNhdGVVc2VyIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInVzZXIiLCJpc1ZhbGlkIiwiaWQiLCJyb2xlIiwiZnVsbE5hbWUiLCJmdWxsX25hbWUiLCJnZXRVc2VyQnlVc2VybmFtZSIsImNyZWF0ZU5DUFJlcG9ydCIsImRhdGEiLCJuY3BJZCIsInN0bXQiLCJyZXN1bHQiLCJydW4iLCJza3VDb2RlIiwibWFjaGluZUNvZGUiLCJkYXRlIiwidGltZUluY2lkZW50IiwiaG9sZFF1YW50aXR5IiwiaG9sZFF1YW50aXR5VU9NIiwicHJvYmxlbURlc2NyaXB0aW9uIiwicGhvdG9BdHRhY2htZW50IiwicWFMZWFkZXIiLCJzdWJtaXR0ZWRCeSIsImNyZWF0ZU5vdGlmaWNhdGlvbkZvclJvbGUiLCJsYXN0SW5zZXJ0Um93aWQiLCJnZXRBbGxOQ1BSZXBvcnRzIiwiYWxsIiwiZ2V0TkNQUmVwb3J0c0ZvclVzZXIiLCJ1c2VySWQiLCJ1c2VyUm9sZSIsInF1ZXJ5IiwicGFyYW1zIiwicmVzdWx0cyIsImdldFBlbmRpbmdOQ1BzRm9yUm9sZSIsImdldE5DUEJ5SWQiLCJhcHByb3ZlTkNQQnlRQUxlYWRlciIsImFwcHJvdmFsRGF0YSIsInFhTGVhZGVyVXNlcm5hbWUiLCJkaXNwb3Npc2kiLCJqdW1sYWhTb3J0aXIiLCJqdW1sYWhSZWxlYXNlIiwianVtbGFoUmVqZWN0IiwiYXNzaWduZWRUZWFtTGVhZGVyIiwiY2hhbmdlcyIsIm5jcCIsInRlYW1MZWFkZXJVc2VyIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwicmVqZWN0TkNQQnlRQUxlYWRlciIsInJlamVjdGlvblJlYXNvbiIsInByb2Nlc3NOQ1BCeVRlYW1MZWFkZXIiLCJwcm9jZXNzRGF0YSIsInRlYW1MZWFkZXJVc2VybmFtZSIsInJvb3RDYXVzZUFuYWx5c2lzIiwiY29ycmVjdGl2ZUFjdGlvbiIsInByZXZlbnRpdmVBY3Rpb24iLCJhcHByb3ZlTkNQQnlQcm9jZXNzTGVhZCIsImNvbW1lbnQiLCJwcm9jZXNzTGVhZFVzZXJuYW1lIiwicmVqZWN0TkNQQnlQcm9jZXNzTGVhZCIsImFzc2lnbmVkX3RlYW1fbGVhZGVyIiwiYXBwcm92ZU5DUEJ5UUFNYW5hZ2VyIiwicWFNYW5hZ2VyVXNlcm5hbWUiLCJzdWJtaXR0ZXJVc2VyIiwic3VibWl0dGVkX2J5IiwibmNwRGV0YWlscyIsInFhX2FwcHJvdmVkX2J5IiwicWFMZWFkZXJVc2VyIiwicmVqZWN0TkNQQnlRQU1hbmFnZXIiLCJ0aXRsZSIsIm1lc3NhZ2UiLCJ0eXBlIiwidXNlcnMiLCJnZXROb3RpZmljYXRpb25zRm9yVXNlciIsImxpbWl0IiwiZ2V0VW5yZWFkTm90aWZpY2F0aW9uQ291bnQiLCJjb3VudCIsIm1hcmtOb3RpZmljYXRpb25Bc1JlYWQiLCJub3RpZmljYXRpb25JZCIsIm1hcmtBbGxOb3RpZmljYXRpb25zQXNSZWFkIiwiZ2V0TkNQU3RhdGlzdGljcyIsInRvdGFsIiwicGVuZGluZyIsInFhQXBwcm92ZWQiLCJ0bFByb2Nlc3NlZCIsInJlamVjdGVkIiwiZ2V0TkNQU3RhdGlzdGljc0ZvclJvbGUiLCJiYXNlUXVlcnkiLCJhcHByb3ZlZCIsInByb2Nlc3NlZCIsInVwZGF0ZUV4aXN0aW5nUmVjb3JkcyIsInVwZGF0ZVF1ZXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/database.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/jose","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fncp%2Fapprove-process%2Froute&page=%2Fapi%2Fncp%2Fapprove-process%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fncp%2Fapprove-process%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();